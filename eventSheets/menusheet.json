{
	"name": "MenuSheet",
	"events": [
		{
			"eventType": "variable",
			"name": "MenuState",
			"type": "string",
			"initialValue": "Default",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 117088745873456
		},
		{
			"eventType": "variable",
			"name": "MENU_DEFAULT",
			"type": "string",
			"initialValue": "Default",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 487520058084010
		},
		{
			"eventType": "variable",
			"name": "MENU_PROMPT",
			"type": "string",
			"initialValue": "Prompt",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 393311558931739
		},
		{
			"eventType": "variable",
			"name": "ChosenCar",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 629049993021322
		},
		{
			"eventType": "variable",
			"name": "Coins",
			"type": "number",
			"initialValue": "10000",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 640203807504181
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-loader-layout-complete",
					"objectClass": "System",
					"sid": 883672588364709
				}
			],
			"actions": [
				{
					"id": "request-project-file",
					"objectClass": "AJAX",
					"sid": 285041981596684,
					"parameters": {
						"tag": "\"flags\"",
						"file": "Flags_defaults.json"
					}
				},
				{
					"id": "request-project-file",
					"objectClass": "AJAX",
					"sid": 708129663027651,
					"parameters": {
						"tag": "\"tiles\"",
						"file": "Tiles_to_conditions.json"
					}
				},
				{
					"id": "request-project-file",
					"objectClass": "AJAX",
					"sid": 218943792359867,
					"parameters": {
						"tag": "\"ownership\"",
						"file": "Ownership_default.json"
					}
				},
				{
					"id": "request-project-file",
					"objectClass": "AJAX",
					"sid": 702395310462474,
					"parameters": {
						"tag": "\"cars\"",
						"file": "Car_data.json"
					}
				},
				{
					"id": "map-function",
					"objectClass": "Functions",
					"sid": 303834832615510,
					"parameters": {
						"name": "\"Garage\"",
						"string": "\"BuyCar\"",
						"function": "BuyCar"
					}
				},
				{
					"id": "map-function",
					"objectClass": "Functions",
					"sid": 628620622150711,
					"parameters": {
						"name": "\"Garage\"",
						"string": "\"UpgradeCar\"",
						"function": "UpgradeCar"
					}
				}
			],
			"sid": 372646819559251
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 451975059179829
				}
			],
			"actions": [
				{
					"callFunction": "CoinsChanged",
					"sid": 908075644430505
				},
				{
					"type": "comment",
					"text": "Make sure player sees title screen"
				},
				{
					"callFunction": "ShowLayer",
					"sid": 876562501315723,
					"parameters": [
						"\"Title\""
					]
				},
				{
					"id": "set-layer-visible",
					"objectClass": "System",
					"sid": 496151789122799,
					"parameters": {
						"layer": "\"Settings_tabs\"",
						"visibility": "invisible"
					}
				},
				{
					"type": "comment",
					"text": "Change text color where we cannot do so before startup"
				},
				{
					"id": "set-css-style",
					"objectClass": "dev_flags",
					"sid": 256870402143535,
					"parameters": {
						"property-name": "\"color\"",
						"value": "\"white\""
					}
				}
			],
			"sid": 939153019443281
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "MainButtons",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 189009715053374,
							"parameters": {
								"object": "garage_buy"
							}
						},
						{
							"id": "is-visible",
							"objectClass": "garage_buy",
							"sid": 108953980155678
						},
						{
							"id": "pick-nth-instance",
							"objectClass": "System",
							"sid": 930446532912627,
							"parameters": {
								"object": "garage_car",
								"instance": "0"
							}
						}
					],
					"actions": [],
					"sid": 639736717427287,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "garage_buy",
									"sid": 366443095359121,
									"parameters": {
										"instance-variable": "State",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 420631175454667,
									"parameters": {
										"object-to-create": "prompt_back",
										"layer": "\"Garage\"",
										"x": "360",
										"y": "640",
										"create-hierarchy": true,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "prompt_back",
									"sid": 989241886751416,
									"parameters": {
										"instance-variable": "function_to_call",
										"value": "\"BuyCar\""
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "prompt_back",
									"sid": 126087999373017,
									"parameters": {
										"instance-variable": "param1",
										"value": "garage_car.shownID"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 353206134561881,
									"parameters": {
										"variable": "MenuState",
										"value": "MENU_PROMPT"
									}
								}
							],
							"sid": 190396435071181,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 416498730624069,
											"parameters": {
												"object": "prompt_message"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "prompt_message",
											"sid": 876138153600603,
											"parameters": {
												"text": "\"Купить машину \"\"\"&garage_car_name.Text&\"\"\"?\"&newline&\"Стоимость: \"&CarChars.At(0, 3, garage_car.shownID)"
											}
										}
									],
									"sid": 183920079534498
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "garage_buy",
									"sid": 527434530231353,
									"parameters": {
										"instance-variable": "State",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 402481737744152,
									"parameters": {
										"variable": "ChosenCar",
										"value": "garage_car.shownID"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "garage_buy",
									"sid": 892403000707736,
									"parameters": {
										"instance-variable": "State",
										"value": "2"
									}
								},
								{
									"id": "set-text",
									"objectClass": "garage_car_price",
									"sid": 172858767517329,
									"parameters": {
										"text": "\"Выбрано\""
									}
								}
							],
							"sid": 135153142571823
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 924419568854543,
							"parameters": {
								"object": "garage_upgrade_char"
							}
						},
						{
							"id": "is-animation-playing",
							"objectClass": "garage_upgrade_char",
							"sid": 151131795924268,
							"parameters": {
								"animation": "\"Avail\""
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 643185418769559,
							"parameters": {
								"object-to-create": "prompt_back",
								"layer": "\"Garage\"",
								"x": "360",
								"y": "640",
								"create-hierarchy": true,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "prompt_back",
							"sid": 894355833012553,
							"parameters": {
								"instance-variable": "function_to_call",
								"value": "\"UpgradeCar\""
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "prompt_back",
							"sid": 763109836351536,
							"parameters": {
								"instance-variable": "param1",
								"value": "garage_car.shownID"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "prompt_back",
							"sid": 613582528170290,
							"parameters": {
								"instance-variable": "param2",
								"value": "garage_upgrade_char.charID"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 793315119194468,
							"parameters": {
								"variable": "MenuState",
								"value": "MENU_PROMPT"
							}
						}
					],
					"sid": 257098175723298,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-last-created",
									"objectClass": "System",
									"sid": 767035969339323,
									"parameters": {
										"object": "prompt_message"
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "prompt_message",
									"sid": 817531341526980,
									"parameters": {
										"text": "\"Купить улучшение для машины \"\"\"&garage_car_name.Text&\"\"\"?\"&newline&\"Стоимость: \"&CarChars.At(garage_upgrade_char.charID * 2 + 2, CarOwnership.At(1, garage_upgrade_char.charID, garage_car.shownID) + 2, garage_car.shownID)"
									}
								}
							],
							"sid": 643213755963299
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 977349041828157,
							"parameters": {
								"object": "garage_switch"
							}
						}
					],
					"actions": [],
					"sid": 913930533729817,
					"children": [
						{
							"eventType": "variable",
							"name": "index",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 977410851042492
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 449163617100936
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 164920201690465,
									"parameters": {
										"variable": "index",
										"value": "(garage_car.shownID + garage_switch.direction + CarChars.Depth) % CarChars.Depth"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "garage_car",
									"sid": 344106142111643,
									"parameters": {
										"instance-variable": "shownID",
										"value": "index"
									}
								},
								{
									"callFunction": "ShowCar",
									"sid": 537665162116620,
									"parameters": [
										"index"
									]
								}
							],
							"sid": 400785495272710
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 949015847621496,
							"parameters": {
								"object": "PlayLvlBut"
							}
						}
					],
					"actions": [],
					"sid": 830283524682247,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "PlayLvlBut",
									"sid": 877320800637059,
									"parameters": {
										"instance-variable": "SelectedLvl",
										"comparison": 0,
										"value": "\"ParkingLot\""
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "PlayLvlBut",
									"sid": 930908537039897,
									"parameters": {
										"instance-variable": "SelectedMode",
										"comparison": 0,
										"value": "\"Race\""
									}
								}
							],
							"actions": [
								{
									"id": "alert",
									"objectClass": "Browser",
									"sid": 731596195287617,
									"parameters": {
										"message": "\"Режим \"\"Схватка\"\" еще не готов.\""
									}
								}
							],
							"sid": 125798044822733
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 915149665408207
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 743873348596375,
									"parameters": {
										"variable": "game_mode",
										"value": "PlayLvlBut.SelectedMode"
									}
								},
								{
									"id": "go-to-layout-by-name",
									"objectClass": "System",
									"sid": 633058201877270,
									"parameters": {
										"layout": "PlayLvlBut.SelectedLvl"
									}
								}
							],
							"sid": 817208911599011
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-touched-object",
							"objectClass": "Touch",
							"sid": 931501140125257,
							"parameters": {
								"object": "LvlBut"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "mmtext",
							"sid": 988596115323543,
							"parameters": {
								"unique-id": "506"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "PlayLvlBut",
							"sid": 793953792066904,
							"parameters": {
								"instance-variable": "SelectedLvl",
								"value": "LvlBut.SendToLvl"
							}
						},
						{
							"id": "set-text",
							"objectClass": "mmtext",
							"sid": 947154661667405,
							"parameters": {
								"text": "\"LVL: \"&PlayLvlBut.SelectedLvl&newline&\n\"MODE: \"&PlayLvlBut.SelectedMode"
							}
						}
					],
					"sid": 105557048729463
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-touched-object",
							"objectClass": "Touch",
							"sid": 522168456044765,
							"parameters": {
								"object": "ModeBut"
							}
						}
					],
					"actions": [],
					"sid": 280713494584618,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-opacity",
									"objectClass": "ModeBut",
									"sid": 153414020104817,
									"parameters": {
										"comparison": 0,
										"opacity": "100"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "mmtext",
									"sid": 363078599438626,
									"parameters": {
										"unique-id": "506"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "PlayLvlBut",
									"sid": 943649924396660,
									"parameters": {
										"instance-variable": "SelectedMode",
										"value": "ModeBut.AnimationPrefix"
									}
								},
								{
									"id": "set-text",
									"objectClass": "mmtext",
									"sid": 298854076981161,
									"parameters": {
										"text": "\"LVL: \"&PlayLvlBut.SelectedLvl&newline&\n\"MODE: \"&PlayLvlBut.SelectedMode"
									}
								}
							],
							"sid": 352036570629267
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 351988271456069
								}
							],
							"actions": [
								{
									"id": "alert",
									"objectClass": "Browser",
									"sid": 280624088827617,
									"parameters": {
										"message": "\"Режим еще не готов.\""
									}
								}
							],
							"sid": 865793328597943
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 229364365991003,
							"parameters": {
								"object": "TabBut"
							}
						}
					],
					"actions": [
						{
							"callFunction": "ShowLayer",
							"sid": 259707817236588,
							"parameters": [
								"TabBut.AnimationPrefix"
							]
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 545902879177626,
							"parameters": {
								"layer": "\"Settings_tabs\"",
								"visibility": "visible"
							}
						}
					],
					"sid": 729468460170253
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 536013842306579,
							"parameters": {
								"object": "MainBut"
							}
						}
					],
					"actions": [
						{
							"callFunction": "ShowLayer",
							"sid": 767968291765644,
							"parameters": [
								"MainBut.AnimationPrefix"
							]
						}
					],
					"sid": 894476351084431,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "MainBut",
									"sid": 996336472368605,
									"parameters": {
										"instance-variable": "AnimationPrefix",
										"comparison": 0,
										"value": "\"Garage\""
									}
								},
								{
									"id": "pick-nth-instance",
									"objectClass": "System",
									"sid": 983618465885014,
									"parameters": {
										"object": "garage_car",
										"instance": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "ShowCar",
									"sid": 607977611437077,
									"parameters": [
										"garage_car.shownID"
									]
								}
							],
							"sid": 919128812942412
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 993552306294610,
							"parameters": {
								"object": "BackToMainBut"
							}
						}
					],
					"actions": [],
					"sid": 175659616111529,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "layer-is-visible",
									"objectClass": "System",
									"sid": 693944897858489,
									"parameters": {
										"layer": "\"Settings_tabs\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "ShowLayer",
									"sid": 100638470421139,
									"parameters": [
										"\"Settings\""
									]
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 922210585205091,
									"parameters": {
										"layer": "\"Settings_tabs\"",
										"visibility": "invisible"
									}
								}
							],
							"sid": 857571566106189
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 589957866771697
								}
							],
							"actions": [
								{
									"callFunction": "ShowLayer",
									"sid": 755218096951689,
									"parameters": [
										"\"Title\""
									]
								}
							],
							"sid": 533464831324954
						}
					]
				}
			],
			"sid": 912634431366851
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Flags",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-clicked",
							"objectClass": "dev_flags",
							"sid": 323252669818077
						}
					],
					"actions": [
						{
							"id": "set-key",
							"objectClass": "flags",
							"sid": 335722949182036,
							"parameters": {
								"key": "dev_flags.flag",
								"value": "1 - flags.Get(dev_flags.flag)"
							}
						}
					],
					"sid": 990695907781205
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-selection-changed",
							"objectClass": "dev_dropdown",
							"sid": 974346830313644
						}
					],
					"actions": [
						{
							"id": "set-key",
							"objectClass": "flags",
							"sid": 802529006271720,
							"parameters": {
								"key": "dev_dropdown.flag",
								"value": "dev_dropdown.SelectedIndex"
							}
						}
					],
					"sid": 673262484024651
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-changed",
							"objectClass": "dev_slider",
							"sid": 783523665533078
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "SettDesc",
							"sid": 686366085139252,
							"parameters": {
								"unique-id": "dev_slider.txt"
							}
						}
					],
					"actions": [
						{
							"id": "set-key",
							"objectClass": "flags",
							"sid": 173186237153474,
							"parameters": {
								"key": "dev_slider.flag",
								"value": "dev_slider.Value"
							}
						},
						{
							"id": "set-text",
							"objectClass": "SettDesc",
							"sid": 261359037619390,
							"parameters": {
								"text": "flags.Get(dev_slider.flag)"
							}
						}
					],
					"sid": 572161563616887
				}
			],
			"sid": 871966225073888
		},
		{
			"functionName": "ShowLayer",
			"functionDescription": "",
			"functionCategory": "GUI",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "LayerToShow",
					"type": "string",
					"initialValue": "MainScreen",
					"comment": "",
					"sid": 496728908709219
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 792712191426755,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 969714975314147,
							"parameters": {
								"name": "\"Layers\"",
								"start-index": "0",
								"end-index": "9"
							}
						}
					],
					"actions": [],
					"sid": 292555577451078,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 111786073169178,
									"parameters": {
										"first-value": "loopindex(\"Layers\")",
										"comparison": 0,
										"second-value": "LayerIndex(LayerToShow)"
									}
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 502329092266314,
									"parameters": {
										"layer": "loopindex(\"Layers\")",
										"visibility": "visible"
									}
								}
							],
							"sid": 482892566384628,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 152097810064974
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 590300919552771,
									"parameters": {
										"layer": "loopindex(\"Layers\")",
										"visibility": "invisible"
									}
								}
							],
							"sid": 505371041512172
						}
					]
				}
			]
		},
		{
			"eventType": "variable",
			"name": "game_mode",
			"type": "string",
			"initialValue": "FreeRoam",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 782284201201050
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-any-completed",
					"objectClass": "AJAX",
					"sid": 571623695148747
				}
			],
			"actions": [],
			"sid": 142078466076038,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 328047719631635,
							"parameters": {
								"object": "LoadableArray",
								"expression": "LoadableArray.tag",
								"comparison": 0,
								"value": "AJAX.Tag"
							}
						}
					],
					"actions": [
						{
							"id": "load",
							"objectClass": "LoadableArray",
							"sid": 941399769639210,
							"parameters": {
								"json": "AJAX.LastData"
							}
						}
					],
					"sid": 131244660707857
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 678851694592982,
							"parameters": {
								"object": "LoadableDict",
								"expression": "LoadableDict.tag",
								"comparison": 0,
								"value": "AJAX.Tag"
							}
						}
					],
					"actions": [
						{
							"id": "load",
							"objectClass": "LoadableDict",
							"sid": 411675264570230,
							"parameters": {
								"json": "AJAX.LastData"
							}
						}
					],
					"sid": 597134750180394
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-completed",
					"objectClass": "AJAX",
					"sid": 160636094926451,
					"parameters": {
						"tag": "\"flags\""
					}
				}
			],
			"actions": [],
			"sid": 491128065365919,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 491776497946221,
							"parameters": {
								"object": "dev_flags"
							}
						}
					],
					"actions": [],
					"sid": 214583899586633,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-value",
									"objectClass": "flags",
									"sid": 470421424288127,
									"parameters": {
										"key": "dev_flags.flag",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-checked",
									"objectClass": "dev_flags",
									"sid": 239982699951188,
									"parameters": {
										"state": "unchecked"
									}
								}
							],
							"sid": 975901975578926
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 859134486264159
								}
							],
							"actions": [
								{
									"id": "set-checked",
									"objectClass": "dev_flags",
									"sid": 635768452164930,
									"parameters": {
										"state": "checked"
									}
								}
							],
							"sid": 902971214145468
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 418822211879283,
							"parameters": {
								"object": "dev_dropdown"
							}
						}
					],
					"actions": [
						{
							"id": "set-selection",
							"objectClass": "dev_dropdown",
							"sid": 736869766869262,
							"parameters": {
								"index": "flags.Get(dev_dropdown.flag)"
							}
						}
					],
					"sid": 320565643147937
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 598082907669692,
							"parameters": {
								"object": "dev_slider"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "SettDesc",
							"sid": 633682929126427,
							"parameters": {
								"unique-id": "dev_slider.txt"
							}
						}
					],
					"actions": [
						{
							"id": "set-value",
							"objectClass": "dev_slider",
							"sid": 407784181862609,
							"parameters": {
								"value": "flags.Get(dev_slider.flag)"
							}
						},
						{
							"id": "set-text",
							"objectClass": "SettDesc",
							"sid": 857551890621067,
							"parameters": {
								"text": "flags.Get(dev_slider.flag)"
							}
						}
					],
					"sid": 135447258478414
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-update-found-sw",
					"objectClass": "Browser",
					"sid": 825026913342695
				}
			],
			"actions": [
				{
					"id": "alert",
					"objectClass": "Browser",
					"sid": 307004022587502,
					"parameters": {
						"message": "\"Найдено обновление! Оно загрузится автоматчически в фоне\""
					}
				}
			],
			"sid": 794707421428266
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-update-ready-sw",
					"objectClass": "Browser",
					"sid": 439691144520236
				}
			],
			"actions": [
				{
					"id": "alert",
					"objectClass": "Browser",
					"sid": 913267405851219,
					"parameters": {
						"message": "\"Обновление загружено! Обновите страницу, чтобы играть в новую версию\""
					}
				}
			],
			"sid": 404718528823276
		},
		{
			"functionName": "ShowCar",
			"functionDescription": "",
			"functionCategory": "GUI",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "carID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 311581331094618
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 136059255837554,
			"children": [
				{
					"eventType": "variable",
					"name": "max_upgrade_tier",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 940901239780203
				},
				{
					"eventType": "variable",
					"name": "upgrade_tier",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 408293397149495
				},
				{
					"eventType": "variable",
					"name": "owned",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 863954758613256
				},
				{
					"eventType": "variable",
					"name": "char_line",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 653904812463451
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 498285524307301
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 437341036001293,
							"parameters": {
								"variable": "owned",
								"value": "CarOwnership.At(0, 0, carID)"
							}
						}
					],
					"sid": 556748318484926
				},
				{
					"eventType": "comment",
					"text": "Show buy button if not purchased"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 693810824258400,
							"parameters": {
								"variable": "owned",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "garage_buy",
							"sid": 381093461031019,
							"parameters": {
								"instance-variable": "State",
								"value": "0"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "garage_buy",
							"sid": 800112463169965,
							"disabled": true,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "garage_car_price",
							"sid": 547067671869756,
							"disabled": true,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-text",
							"objectClass": "garage_car_price",
							"sid": 104758647703586,
							"parameters": {
								"text": "\"👛 \"&CarChars.At(0, 3, carID)"
							}
						}
					],
					"sid": 763821087665214
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 142294711120409
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 272608647124427,
							"parameters": {
								"variable": "ChosenCar",
								"comparison": 0,
								"value": "garage_car.shownID"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "garage_buy",
							"sid": 200056164578478,
							"parameters": {
								"instance-variable": "State",
								"value": "2"
							}
						},
						{
							"id": "set-text",
							"objectClass": "garage_car_price",
							"sid": 362288164519589,
							"parameters": {
								"text": "\"Выбрано\""
							}
						},
						{
							"id": "set-visible",
							"objectClass": "garage_buy",
							"sid": 204584640425945,
							"disabled": true,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "garage_car_price",
							"sid": 181386722715626,
							"disabled": true,
							"parameters": {
								"visibility": "invisible"
							}
						}
					],
					"sid": 914584415802559
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 240717462548191
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "garage_buy",
							"sid": 648440510982111,
							"parameters": {
								"instance-variable": "State",
								"value": "1"
							}
						},
						{
							"id": "set-text",
							"objectClass": "garage_car_price",
							"sid": 628104307275854,
							"parameters": {
								"text": "\"Выбрать\""
							}
						}
					],
					"sid": 242955646276229
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 848336690467325,
							"parameters": {
								"name": "\"car_chars\"",
								"start-index": "0",
								"end-index": "4"
							}
						},
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 249996156532608,
							"parameters": {
								"object": "garage_bar",
								"expression": "garage_bar.charID",
								"comparison": 0,
								"value": "loopindex(\"car_chars\")"
							}
						},
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 451357421333186,
							"parameters": {
								"object": "garage_bar_max",
								"expression": "garage_bar_max.charID",
								"comparison": 0,
								"value": "loopindex(\"car_chars\")"
							}
						},
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 411517760392630,
							"parameters": {
								"object": "garage_upgrade_char",
								"expression": "garage_upgrade_char.charID",
								"comparison": 0,
								"value": "loopindex(\"car_chars\")"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 974028194062032,
							"parameters": {
								"variable": "upgrade_tier",
								"value": "CarOwnership.At(1, garage_bar.charID, carID)"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 601868069077506,
							"parameters": {
								"variable": "char_line",
								"value": "2 * garage_bar.charID + 1"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 871351287341160,
							"parameters": {
								"variable": "max_upgrade_tier",
								"value": "CarChars.At(char_line, 1, carID)"
							}
						},
						{
							"id": "set-width",
							"objectClass": "garage_bar",
							"sid": 630697681489492,
							"parameters": {
								"width": "((CarChars.At(char_line, 0, carID) + (upgrade_tier = 0 ? 0 : CarChars.At(char_line, upgrade_tier + 1, carID))) - garage_bar.lval) / (garage_bar.hval - garage_bar.lval) * 624"
							}
						},
						{
							"id": "set-width",
							"objectClass": "garage_bar_max",
							"sid": 845526952898887,
							"parameters": {
								"width": "((CarChars.At(char_line, 0, carID) + (max_upgrade_tier = 0 ? 0 : CarChars.At(char_line, max_upgrade_tier + 1, carID))) - garage_bar_max.lval) / (garage_bar_max.hval - garage_bar_max.lval) * 624"
							}
						}
					],
					"sid": 576372655299546,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 905137418207308,
									"parameters": {
										"variable": "max_upgrade_tier",
										"comparison": 0,
										"value": "upgrade_tier"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 760631811732212,
									"parameters": {
										"variable": "owned",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "garage_upgrade_char",
									"sid": 853443239014106,
									"parameters": {
										"animation": "\"NoAvail\"",
										"from": "beginning"
									}
								}
							],
							"sid": 974734432549383,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 305846938748888
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 299915766867812,
									"parameters": {
										"variable": "max_upgrade_tier",
										"comparison": 4,
										"value": "upgrade_tier"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "garage_upgrade_char",
									"sid": 199750494949350,
									"parameters": {
										"animation": "\"Avail\"",
										"from": "beginning"
									}
								}
							],
							"sid": 142385200348249
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-nth-instance",
							"objectClass": "System",
							"sid": 324172535305707,
							"parameters": {
								"object": "garage_car",
								"instance": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "garage_car",
							"sid": 297655508044742,
							"parameters": {
								"animation": "CarChars.At(0, 0, carID)",
								"from": "beginning"
							}
						}
					],
					"sid": 246712420369439
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-nth-instance",
							"objectClass": "System",
							"sid": 508708925302432,
							"parameters": {
								"object": "garage_car_name",
								"instance": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "garage_car_name",
							"sid": 413776098186194,
							"parameters": {
								"text": "CarChars.At(0, 4, carID)"
							}
						}
					],
					"sid": 506840963835175
				}
			]
		},
		{
			"functionName": "CoinsChanged",
			"functionDescription": "",
			"functionCategory": "GUI",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "pick-all",
					"objectClass": "System",
					"sid": 268388626509789,
					"parameters": {
						"object": "coin_txt"
					}
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "coin_txt",
					"sid": 122539013001485,
					"parameters": {
						"text": "\"Coins: \"&Coins"
					}
				}
			],
			"sid": 883561806101036
		},
		{
			"functionName": "BuyCar",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "number",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "carID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 942694399754787
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 660105375418881,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 269001143745815,
							"parameters": {
								"variable": "Coins",
								"comparison": 5,
								"value": "CarChars.At(0, 3, carID)"
							}
						}
					],
					"actions": [
						{
							"id": "subtract-from-eventvar",
							"objectClass": "System",
							"sid": 947286736814858,
							"parameters": {
								"variable": "Coins",
								"value": "CarChars.At(0, 3, carID)"
							}
						},
						{
							"callFunction": "CoinsChanged",
							"sid": 782248568916387
						},
						{
							"id": "set-at-xyz",
							"objectClass": "CarOwnership",
							"sid": 681046081788916,
							"parameters": {
								"x": "0",
								"y": "0",
								"z": "carID",
								"value": "1"
							}
						},
						{
							"callFunction": "ShowCar",
							"sid": 784052290706652,
							"parameters": [
								"carID"
							]
						},
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 983037319465605,
							"parameters": {
								"value": "1"
							}
						}
					],
					"sid": 660497388488934
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 188440863589679
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 170611410602843,
							"parameters": {
								"value": "0"
							}
						}
					],
					"sid": 829111861082263
				}
			]
		},
		{
			"functionName": "UpgradeCar",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "number",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "carID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 255382305445955
				},
				{
					"name": "charID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 410065838772107
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 836570297823269,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 812807003025000,
							"parameters": {
								"variable": "Coins",
								"comparison": 5,
								"value": "CarChars.At(2 * charID + 2, CarOwnership.At(1, charID, carID) + 2, carID)"
							}
						}
					],
					"actions": [
						{
							"id": "subtract-from-eventvar",
							"objectClass": "System",
							"sid": 783744138361614,
							"parameters": {
								"variable": "Coins",
								"value": "CarChars.At(2 * charID + 2, CarOwnership.At(1, charID, carID) + 2, carID)"
							}
						},
						{
							"callFunction": "CoinsChanged",
							"sid": 341904236149852
						},
						{
							"id": "set-at-xyz",
							"objectClass": "CarOwnership",
							"sid": 934500465404622,
							"parameters": {
								"x": "1",
								"y": "charID",
								"z": "carID",
								"value": "CarOwnership.At(1, charID, carID) + 1"
							}
						},
						{
							"id": "set-at-xyz",
							"objectClass": "CarOwnership",
							"sid": 613861893387087,
							"parameters": {
								"x": "2",
								"y": "charID",
								"z": "carID",
								"value": "CarChars.At(2 * charID + 1, 0, carID) + CarChars.At(2 * charID + 1, CarOwnership.At(1, charID, carID) + 1, carID)"
							}
						},
						{
							"callFunction": "ShowCar",
							"sid": 206050269312229,
							"parameters": [
								"carID"
							]
						},
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 462886427229002,
							"parameters": {
								"value": "CarOwnership.At(1, charID, carID)"
							}
						}
					],
					"sid": 349983159909399
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 140413980250136
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 746495729109465,
							"parameters": {
								"value": "0"
							}
						}
					],
					"sid": 631702661699829
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-eventvar",
					"objectClass": "System",
					"sid": 615722401496838,
					"parameters": {
						"variable": "MenuState",
						"comparison": 0,
						"value": "MENU_PROMPT"
					}
				}
			],
			"actions": [],
			"sid": 342649526677113,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 581183724209856
						}
					],
					"actions": [
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 927135827678044,
							"parameters": {
								"group-name": "\"MainButtons\"",
								"state": "deactivated"
							}
						},
						{
							"id": "alert",
							"objectClass": "Browser",
							"sid": 941302298859293,
							"disabled": true,
							"parameters": {
								"message": "\"Prompt on\""
							}
						}
					],
					"sid": 609772499375234
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "else",
					"objectClass": "System",
					"sid": 849026916605556
				}
			],
			"actions": [],
			"sid": 142293719144283,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 891913983311364
						}
					],
					"actions": [
						{
							"id": "alert",
							"objectClass": "Browser",
							"sid": 559180946124244,
							"disabled": true,
							"parameters": {
								"message": "\"Prompt off\""
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 558546018945796,
							"parameters": {
								"group-name": "\"MainButtons\"",
								"state": "activated"
							}
						}
					],
					"sid": 475085210979602
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-tap-object",
					"objectClass": "Touch",
					"sid": 586785472749403,
					"parameters": {
						"object": "prompt_yes"
					}
				}
			],
			"actions": [],
			"sid": 417666042872022,
			"children": [
				{
					"eventType": "variable",
					"name": "val",
					"type": "number",
					"initialValue": "-1",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 637132172354655
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 559646509154385
						}
					],
					"actions": [
						{
							"type": "script",
							"script": "let prompt = runtime.objects.prompt_back.getFirstInstance();\nlocalVars.val = runtime.callFunction(prompt.instVars.function_to_call, prompt.instVars.param1, prompt.instVars.param2);"
						},
						{
							"id": "destroy",
							"objectClass": "prompt_back",
							"sid": 587461434377217
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 298526157011450,
							"parameters": {
								"variable": "MenuState",
								"value": "MENU_DEFAULT"
							}
						}
					],
					"sid": 593237645097633
				},
				{
					"eventType": "comment",
					"text": "Not enough coins - function have returned 0"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 362147315856182,
							"parameters": {
								"variable": "val",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "alert",
							"objectClass": "Browser",
							"sid": 344728029193135,
							"parameters": {
								"message": "\"Не хватает средств!\""
							}
						}
					],
					"sid": 251001491661804
				},
				{
					"eventType": "comment",
					"text": "Success"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 390142226009129
						}
					],
					"actions": [
						{
							"id": "alert",
							"objectClass": "Browser",
							"sid": 402293783287332,
							"disabled": true,
							"parameters": {
								"message": "\"Успешная покупка! \""
							}
						}
					],
					"sid": 215776673678856
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-tap-object",
					"objectClass": "Touch",
					"sid": 138951326182424,
					"parameters": {
						"object": "prompt_no"
					}
				}
			],
			"actions": [
				{
					"id": "destroy",
					"objectClass": "prompt_back",
					"sid": 583139424219803
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 890107028480528,
					"parameters": {
						"variable": "MenuState",
						"value": "MENU_DEFAULT"
					}
				}
			],
			"sid": 101655602285942
		}
	],
	"sid": 188176345997916
}