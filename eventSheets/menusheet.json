{
	"name": "MenuSheet",
	"events": [
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-loader-layout-complete",
					"objectClass": "System",
					"sid": 883672588364709
				}
			],
			"actions": [
				{
					"id": "request-project-file",
					"objectClass": "AJAX",
					"sid": 285041981596684,
					"parameters": {
						"tag": "\"flags\"",
						"file": "Flags_defaults.json"
					}
				},
				{
					"id": "request-project-file",
					"objectClass": "AJAX",
					"sid": 708129663027651,
					"parameters": {
						"tag": "\"tiles\"",
						"file": "TilesToConditions.json"
					}
				}
			],
			"sid": 372646819559251
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 451975059179829
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "Make sure player sees title screen"
				},
				{
					"callFunction": "ShowLayer",
					"sid": 876562501315723,
					"parameters": [
						"\"Title\""
					]
				},
				{
					"id": "set-layer-visible",
					"objectClass": "System",
					"sid": 496151789122799,
					"parameters": {
						"layer": "\"Settings_tabs\"",
						"visibility": "invisible"
					}
				},
				{
					"type": "comment",
					"text": "Change text color where we cannot do so before startup"
				},
				{
					"id": "set-css-style",
					"objectClass": "dev_flags",
					"sid": 256870402143535,
					"parameters": {
						"property-name": "\"color\"",
						"value": "\"white\""
					}
				}
			],
			"sid": 939153019443281
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "MainButtons",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 949015847621496,
							"parameters": {
								"object": "PlayLvlBut"
							}
						}
					],
					"actions": [],
					"sid": 830283524682247,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "PlayLvlBut",
									"sid": 877320800637059,
									"parameters": {
										"instance-variable": "SelectedLvl",
										"comparison": 0,
										"value": "\"ParkingLot\""
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "PlayLvlBut",
									"sid": 930908537039897,
									"parameters": {
										"instance-variable": "SelectedMode",
										"comparison": 0,
										"value": "\"Race\""
									}
								}
							],
							"actions": [
								{
									"id": "alert",
									"objectClass": "Browser",
									"sid": 731596195287617,
									"parameters": {
										"message": "\"Режим \"\"Схватка\"\" еще не готов.\""
									}
								}
							],
							"sid": 125798044822733
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 915149665408207
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 743873348596375,
									"parameters": {
										"variable": "game_mode",
										"value": "PlayLvlBut.SelectedMode"
									}
								},
								{
									"id": "go-to-layout-by-name",
									"objectClass": "System",
									"sid": 633058201877270,
									"parameters": {
										"layout": "PlayLvlBut.SelectedLvl"
									}
								}
							],
							"sid": 817208911599011
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-touched-object",
							"objectClass": "Touch",
							"sid": 931501140125257,
							"parameters": {
								"object": "LvlBut"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "mmtext",
							"sid": 988596115323543,
							"parameters": {
								"unique-id": "506"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "PlayLvlBut",
							"sid": 793953792066904,
							"parameters": {
								"instance-variable": "SelectedLvl",
								"value": "LvlBut.SendToLvl"
							}
						},
						{
							"id": "set-text",
							"objectClass": "mmtext",
							"sid": 947154661667405,
							"parameters": {
								"text": "\"LVL: \"&PlayLvlBut.SelectedLvl&newline&\n\"MODE: \"&PlayLvlBut.SelectedMode"
							}
						}
					],
					"sid": 105557048729463
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-touched-object",
							"objectClass": "Touch",
							"sid": 522168456044765,
							"parameters": {
								"object": "ModeBut"
							}
						}
					],
					"actions": [],
					"sid": 280713494584618,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-opacity",
									"objectClass": "ModeBut",
									"sid": 153414020104817,
									"parameters": {
										"comparison": 0,
										"opacity": "100"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "mmtext",
									"sid": 363078599438626,
									"parameters": {
										"unique-id": "506"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "PlayLvlBut",
									"sid": 943649924396660,
									"parameters": {
										"instance-variable": "SelectedMode",
										"value": "ModeBut.AnimationPrefix"
									}
								},
								{
									"id": "set-text",
									"objectClass": "mmtext",
									"sid": 298854076981161,
									"parameters": {
										"text": "\"LVL: \"&PlayLvlBut.SelectedLvl&newline&\n\"MODE: \"&PlayLvlBut.SelectedMode"
									}
								}
							],
							"sid": 352036570629267
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 351988271456069
								}
							],
							"actions": [
								{
									"id": "alert",
									"objectClass": "Browser",
									"sid": 280624088827617,
									"parameters": {
										"message": "\"Режим еще не готов.\""
									}
								}
							],
							"sid": 865793328597943
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 229364365991003,
							"parameters": {
								"object": "TabBut"
							}
						}
					],
					"actions": [
						{
							"callFunction": "ShowLayer",
							"sid": 259707817236588,
							"parameters": [
								"TabBut.AnimationPrefix"
							]
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 545902879177626,
							"parameters": {
								"layer": "\"Settings_tabs\"",
								"visibility": "visible"
							}
						}
					],
					"sid": 729468460170253
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 536013842306579,
							"parameters": {
								"object": "MainBut"
							}
						}
					],
					"actions": [
						{
							"callFunction": "ShowLayer",
							"sid": 767968291765644,
							"parameters": [
								"MainBut.AnimationPrefix"
							]
						}
					],
					"sid": 894476351084431
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 993552306294610,
							"parameters": {
								"object": "BackToMainBut"
							}
						}
					],
					"actions": [],
					"sid": 175659616111529,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "layer-is-visible",
									"objectClass": "System",
									"sid": 693944897858489,
									"parameters": {
										"layer": "\"Settings_tabs\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "ShowLayer",
									"sid": 100638470421139,
									"parameters": [
										"\"Settings\""
									]
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 922210585205091,
									"parameters": {
										"layer": "\"Settings_tabs\"",
										"visibility": "invisible"
									}
								}
							],
							"sid": 857571566106189
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 589957866771697
								}
							],
							"actions": [
								{
									"callFunction": "ShowLayer",
									"sid": 755218096951689,
									"parameters": [
										"\"Title\""
									]
								}
							],
							"sid": 533464831324954
						}
					]
				}
			],
			"sid": 912634431366851
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Flags",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-clicked",
							"objectClass": "dev_flags",
							"sid": 323252669818077
						}
					],
					"actions": [
						{
							"id": "set-key",
							"objectClass": "flags",
							"sid": 335722949182036,
							"parameters": {
								"key": "dev_flags.flag",
								"value": "1 - flags.Get(dev_flags.flag)"
							}
						}
					],
					"sid": 990695907781205
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-selection-changed",
							"objectClass": "dev_dropdown",
							"sid": 974346830313644
						}
					],
					"actions": [
						{
							"id": "set-key",
							"objectClass": "flags",
							"sid": 802529006271720,
							"parameters": {
								"key": "dev_dropdown.flag",
								"value": "dev_dropdown.SelectedIndex"
							}
						}
					],
					"sid": 673262484024651
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-changed",
							"objectClass": "dev_slider",
							"sid": 783523665533078
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "SettDesc",
							"sid": 686366085139252,
							"parameters": {
								"unique-id": "dev_slider.txt"
							}
						}
					],
					"actions": [
						{
							"id": "set-key",
							"objectClass": "flags",
							"sid": 173186237153474,
							"parameters": {
								"key": "dev_slider.flag",
								"value": "dev_slider.Value"
							}
						},
						{
							"id": "set-text",
							"objectClass": "SettDesc",
							"sid": 261359037619390,
							"parameters": {
								"text": "flags.Get(dev_slider.flag)"
							}
						}
					],
					"sid": 572161563616887
				}
			],
			"sid": 871966225073888
		},
		{
			"functionName": "ShowLayer",
			"functionDescription": "",
			"functionCategory": "GUI",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "LayerToShow",
					"type": "string",
					"initialValue": "MainScreen",
					"comment": "",
					"sid": 496728908709219
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 792712191426755,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 383603897676969,
							"parameters": {
								"name": "\"Layers\"",
								"start-index": "0",
								"end-index": "6"
							}
						}
					],
					"actions": [],
					"sid": 292555577451078,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 111786073169178,
									"parameters": {
										"first-value": "loopindex(\"Layers\")",
										"comparison": 0,
										"second-value": "LayerIndex(LayerToShow)"
									}
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 502329092266314,
									"parameters": {
										"layer": "loopindex(\"Layers\")",
										"visibility": "visible"
									}
								}
							],
							"sid": 482892566384628,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 152097810064974
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 590300919552771,
									"parameters": {
										"layer": "loopindex(\"Layers\")",
										"visibility": "invisible"
									}
								}
							],
							"sid": 505371041512172
						}
					]
				}
			]
		},
		{
			"eventType": "variable",
			"name": "game_mode",
			"type": "string",
			"initialValue": "FreeRoam",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 782284201201050
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-any-completed",
					"objectClass": "AJAX",
					"sid": 571623695148747
				}
			],
			"actions": [],
			"sid": 142078466076038,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 328047719631635,
							"parameters": {
								"object": "LoadableArray",
								"expression": "LoadableArray.tag",
								"comparison": 0,
								"value": "AJAX.Tag"
							}
						}
					],
					"actions": [
						{
							"id": "load",
							"objectClass": "LoadableArray",
							"sid": 941399769639210,
							"parameters": {
								"json": "AJAX.LastData"
							}
						}
					],
					"sid": 131244660707857
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 678851694592982,
							"parameters": {
								"object": "LoadableDict",
								"expression": "LoadableDict.tag",
								"comparison": 0,
								"value": "AJAX.Tag"
							}
						}
					],
					"actions": [
						{
							"id": "load",
							"objectClass": "LoadableDict",
							"sid": 411675264570230,
							"parameters": {
								"json": "AJAX.LastData"
							}
						}
					],
					"sid": 597134750180394
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-completed",
					"objectClass": "AJAX",
					"sid": 160636094926451,
					"parameters": {
						"tag": "\"flags\""
					}
				}
			],
			"actions": [],
			"sid": 491128065365919,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 491776497946221,
							"parameters": {
								"object": "dev_flags"
							}
						}
					],
					"actions": [],
					"sid": 214583899586633,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-value",
									"objectClass": "flags",
									"sid": 470421424288127,
									"parameters": {
										"key": "dev_flags.flag",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-checked",
									"objectClass": "dev_flags",
									"sid": 239982699951188,
									"parameters": {
										"state": "unchecked"
									}
								}
							],
							"sid": 975901975578926
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 859134486264159
								}
							],
							"actions": [
								{
									"id": "set-checked",
									"objectClass": "dev_flags",
									"sid": 635768452164930,
									"parameters": {
										"state": "checked"
									}
								}
							],
							"sid": 902971214145468
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 418822211879283,
							"parameters": {
								"object": "dev_dropdown"
							}
						}
					],
					"actions": [
						{
							"id": "set-selection",
							"objectClass": "dev_dropdown",
							"sid": 736869766869262,
							"parameters": {
								"index": "flags.Get(dev_dropdown.flag)"
							}
						}
					],
					"sid": 320565643147937
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 598082907669692,
							"parameters": {
								"object": "dev_slider"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "SettDesc",
							"sid": 633682929126427,
							"parameters": {
								"unique-id": "dev_slider.txt"
							}
						}
					],
					"actions": [
						{
							"id": "set-value",
							"objectClass": "dev_slider",
							"sid": 407784181862609,
							"parameters": {
								"value": "flags.Get(dev_slider.flag)"
							}
						},
						{
							"id": "set-text",
							"objectClass": "SettDesc",
							"sid": 857551890621067,
							"parameters": {
								"text": "flags.Get(dev_slider.flag)"
							}
						}
					],
					"sid": 135447258478414
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-update-found-sw",
					"objectClass": "Browser",
					"sid": 825026913342695
				}
			],
			"actions": [
				{
					"id": "alert",
					"objectClass": "Browser",
					"sid": 307004022587502,
					"parameters": {
						"message": "\"Найдено обновление! Оно загрузится автоматчически в фоне\""
					}
				}
			],
			"sid": 794707421428266
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-update-ready-sw",
					"objectClass": "Browser",
					"sid": 439691144520236
				}
			],
			"actions": [
				{
					"id": "alert",
					"objectClass": "Browser",
					"sid": 913267405851219,
					"parameters": {
						"message": "\"Обновление загружено! Обновите страницу, чтобы играть в новую версию\""
					}
				}
			],
			"sid": 404718528823276
		}
	],
	"sid": 188176345997916
}