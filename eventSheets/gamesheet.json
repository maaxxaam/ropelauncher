{
	"name": "GameSheet",
	"events": [
		{
			"eventType": "variable",
			"name": "RaceLaps",
			"type": "number",
			"initialValue": "3",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 397961711230499
		},
		{
			"eventType": "variable",
			"name": "RaceEnded",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 121909620870431
		},
		{
			"eventType": "variable",
			"name": "RaceStarted",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 798869248164890
		},
		{
			"eventType": "variable",
			"name": "AdsDisabled",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 524580793711449
		},
		{
			"eventType": "variable",
			"name": "Lives",
			"type": "number",
			"initialValue": "3",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 813717106884652
		},
		{
			"eventType": "variable",
			"name": "Speed",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 408447452104862
		},
		{
			"eventType": "variable",
			"name": "LvlScore",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 264636612934621
		},
		{
			"eventType": "variable",
			"name": "DesAngle",
			"type": "number",
			"initialValue": "270",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 854686913018689
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 157482633919241
				}
			],
			"actions": [
				{
					"id": "set-boolean-eventvar",
					"objectClass": "System",
					"sid": 457275661211614,
					"parameters": {
						"variable": "RaceStarted",
						"value": "false"
					}
				},
				{
					"id": "set-boolean-eventvar",
					"objectClass": "System",
					"sid": 413331067832303,
					"parameters": {
						"variable": "RaceEnded",
						"value": "false"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 117795634144181,
					"parameters": {
						"variable": "RaceLaps",
						"value": "flags.Get(\"difficulty_laps\")"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 653482658606803,
					"parameters": {
						"variable": "NitroCharge",
						"value": "0"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 608085690447967,
					"parameters": {
						"variable": "NitroState",
						"value": "0"
					}
				},
				{
					"callFunction": "NitroChanged",
					"sid": 891336781107510
				},
				{
					"id": "set-layer-scale",
					"objectClass": "System",
					"sid": 814681009362879,
					"parameters": {
						"layer": "\"Level\"",
						"scale": "flags.Get(\"cam_scale\") = 0 ? 0.75 :\r\nflags.Get(\"cam_scale\") = 1 ? 1 : 1.25"
					}
				},
				{
					"id": "set-layer-scale",
					"objectClass": "System",
					"sid": 699358182700617,
					"parameters": {
						"layer": "\"Layout\"",
						"scale": "flags.Get(\"cam_scale\") = 0 ? 0.75 :\r\nflags.Get(\"cam_scale\") = 1 ? 1 : 1.25"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 672535164683277,
					"parameters": {
						"variable": "Lives",
						"value": "flags.Get(\"difficulty_lives\")"
					}
				},
				{
					"id": "regenerate-obstacle-map",
					"objectClass": "car_edge_collision",
					"sid": 567998723866645,
					"behaviorType": "Pathfinding"
				},
				{
					"callFunction": "PlaceDriftZones",
					"sid": 256532380267772,
					"disabled": true
				},
				{
					"id": "wait-for-previous-actions",
					"objectClass": "System",
					"sid": 422176973640270,
					"disabled": true
				},
				{
					"callFunction": "PlaceCars",
					"sid": 222769547797731
				},
				{
					"id": "wait-for-previous-actions",
					"objectClass": "System",
					"sid": 450421481292698
				},
				{
					"callFunction": "PlaceTireEffects",
					"sid": 599696852187898
				},
				{
					"id": "wait-for-previous-actions",
					"objectClass": "System",
					"sid": 160266776133250,
					"disabled": true
				},
				{
					"callFunction": "do_timer",
					"sid": 162916691352975
				},
				{
					"id": "move-to-object",
					"objectClass": "LevelLight",
					"sid": 748838774466109,
					"parameters": {
						"where": "in-front",
						"object": "Car"
					}
				}
			],
			"sid": 515440288879850,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 863626839444245,
							"parameters": {
								"object": "scenery"
							}
						},
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 526757512851981,
							"parameters": {
								"object": "scenery",
								"expression": "scenery.AnimationName",
								"comparison": 0,
								"value": "\"Tree2\""
							}
						}
					],
					"actions": [
						{
							"id": "set-angle",
							"objectClass": "scenery",
							"sid": 739359440917497,
							"parameters": {
								"angle": "random(0, 360)"
							}
						},
						{
							"id": "alert",
							"objectClass": "Browser",
							"sid": 530646331456672,
							"disabled": true,
							"parameters": {
								"message": "scenery.Angle"
							}
						}
					],
					"sid": 275767945633297
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 329043249306011,
							"parameters": {
								"object": "scenery"
							}
						},
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 350043766134767,
							"parameters": {
								"object": "scenery",
								"expression": "scenery.AnimationName",
								"comparison": 0,
								"value": "\"Tree1\""
							}
						}
					],
					"actions": [
						{
							"id": "set-angle",
							"objectClass": "scenery",
							"sid": 751288654529534,
							"parameters": {
								"angle": "random(0, 360)"
							}
						},
						{
							"id": "alert",
							"objectClass": "Browser",
							"sid": 403260501861934,
							"disabled": true,
							"parameters": {
								"message": "scenery.Angle"
							}
						}
					],
					"sid": 714575164109380
				},
				{
					"eventType": "comment",
					"text": "Turn off moving obstacles if they are disabled"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-value",
							"objectClass": "flags",
							"sid": 237296457063379,
							"parameters": {
								"key": "\"obstacles_dynamic_enabled\"",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [],
					"sid": 263040460745615,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 583700633942635,
									"parameters": {
										"object": "Obstacle",
										"expression": "Obstacle.Moving",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "Obstacle",
									"sid": 602365787369424,
									"parameters": {
										"instance-variable": "Moving",
										"value": "false"
									}
								},
								{
									"id": "set-animation",
									"objectClass": "Obstacle",
									"sid": 276892104496257,
									"parameters": {
										"animation": "\"rock\"&choose(\"1\", \"2\", \"3\")",
										"from": "beginning"
									}
								}
							],
							"sid": 333716577271007
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 629415196916888
						}
					],
					"actions": [],
					"sid": 231869550416525,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 870727525378206,
									"parameters": {
										"object": "Obstacle",
										"expression": "Obstacle.Moving",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "set-active",
									"objectClass": "Obstacle",
									"sid": 943365466022978,
									"behaviorType": "Sine",
									"parameters": {
										"state": "active"
									}
								}
							],
							"sid": 212844736112533
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Hide static obstacles if they are disabled"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-value",
							"objectClass": "flags",
							"sid": 926003344190119,
							"parameters": {
								"key": "\"obstacles_static_enabled\"",
								"comparison": 0,
								"value": "0"
							}
						},
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 174780462532516,
							"parameters": {
								"object": "Obstacle",
								"expression": "Obstacle.Moving",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Obstacle",
							"sid": 421158355766519
						},
						{
							"id": "regenerate-obstacle-map",
							"objectClass": "car_edge_collision",
							"sid": 331459845722029,
							"behaviorType": "Pathfinding"
						}
					],
					"sid": 607538592892213
				},
				{
					"eventType": "comment",
					"text": "Turn moving bonuses into static if they are disabled"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-value",
							"objectClass": "flags",
							"sid": 613750456156920,
							"parameters": {
								"key": "\"bonuses_rockets_enabled\"",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [],
					"sid": 965767737321887,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 810097910379749,
									"parameters": {
										"object": "Bonus",
										"expression": "Bonus.AnimationName",
										"comparison": 0,
										"value": "\"Rocket\""
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "Bonus",
									"sid": 931473539006948,
									"parameters": {
										"instance-variable": "Moving",
										"value": "false"
									}
								},
								{
									"id": "set-animation",
									"objectClass": "Bonus",
									"sid": 927528614282927,
									"parameters": {
										"animation": "\"Nitro\"",
										"from": "beginning"
									}
								}
							],
							"sid": 520919525920556
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 966771964488045
						}
					],
					"actions": [],
					"sid": 441644156030615,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 768428732395293,
									"parameters": {
										"object": "Bonus",
										"expression": "Bonus.Moving",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "set-active",
									"objectClass": "Bonus",
									"sid": 472452379195856,
									"behaviorType": "Sine",
									"parameters": {
										"state": "active"
									}
								}
							],
							"sid": 102696978986324
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Hide static bonuses if they are disabled"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-value",
							"objectClass": "flags",
							"sid": 856741261432126,
							"parameters": {
								"key": "\"bonuses_nitro_enabled\"",
								"comparison": 0,
								"value": "0"
							}
						},
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 164764702701021,
							"parameters": {
								"object": "Bonus",
								"expression": "Bonus.Moving",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "Bonus",
							"sid": 148145890578047,
							"disabled": true,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "destroy",
							"objectClass": "Bonus",
							"sid": 914371191052290
						}
					],
					"sid": 606589347167187
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-nth-instance",
							"objectClass": "System",
							"sid": 439556661012432,
							"parameters": {
								"object": "score_ui",
								"instance": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "score_ui",
							"sid": 533755586127328,
							"parameters": {
								"text": "lives&\"❤\""
							}
						}
					],
					"sid": 632762003142762
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "pick-by-comparison",
					"objectClass": "System",
					"sid": 980742843819439,
					"parameters": {
						"object": "roads",
						"expression": "roads.back",
						"comparison": 0,
						"value": "0"
					}
				},
				{
					"id": "is-overlapping-another-object",
					"objectClass": "Car",
					"sid": 377815285178596,
					"parameters": {
						"object": "roads"
					},
					"isInverted": true
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "Car",
					"sid": 904803748240610,
					"parameters": {
						"instance-variable": "Player"
					}
				}
			],
			"actions": [
				{
					"callFunction": "GameOver",
					"sid": 789709497906417
				}
			],
			"sid": 412178629026609
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 725598072013512,
					"parameters": {
						"variable": "RaceStarted"
					},
					"isInverted": true
				},
				{
					"id": "pick-all",
					"objectClass": "System",
					"sid": 717286730691064,
					"parameters": {
						"object": "Car"
					}
				}
			],
			"actions": [
				{
					"id": "simulate-control",
					"objectClass": "Car",
					"sid": 214996296527328,
					"behaviorType": "Car",
					"parameters": {
						"control": "accelerate"
					}
				}
			],
			"sid": 213140790677711
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-key-released",
					"objectClass": "Keyboard",
					"sid": 877449549200027,
					"parameters": {
						"key": 27
					}
				}
			],
			"actions": [
				{
					"id": "go-to-layout",
					"objectClass": "System",
					"sid": 504675617470086,
					"parameters": {
						"layout": "Menu"
					}
				}
			],
			"sid": 627027623658666
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "for-each",
					"objectClass": "System",
					"sid": 736663243028953,
					"parameters": {
						"object": "Car"
					}
				},
				{
					"id": "is-moving",
					"objectClass": "Car",
					"sid": 198437559846316,
					"behaviorType": "Car"
				}
			],
			"actions": [],
			"sid": 300078525979333,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Car",
							"sid": 686463528061533,
							"parameters": {
								"instance-variable": "Player"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "cam_follow",
							"sid": 382784906451298,
							"parameters": {
								"x": "Car.X + Car.Car.VectorX/5 * (1 - flags.Get(\"cam_center\"))",
								"y": "Car.Y + Car.Car.VectorY/3 * (1 - flags.Get(\"cam_center\"))"
							}
						}
					],
					"sid": 844422868738290
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Car",
							"sid": 405866217878265,
							"parameters": {
								"instance-variable": "Flying"
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 939424803421286,
					"children": [
						{
							"eventType": "variable",
							"name": "tile",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 973186133327901
						},
						{
							"eventType": "variable",
							"name": "max_speed_coef",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 207348219248468
						},
						{
							"eventType": "variable",
							"name": "accel_coef",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 281736846759456
						},
						{
							"eventType": "variable",
							"name": "decel_coef",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 803461815818588
						},
						{
							"eventType": "variable",
							"name": "steer_coef",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 541549686686634
						},
						{
							"eventType": "variable",
							"name": "recover_coef",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 165135002895130
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 354302602458649,
									"parameters": {
										"name": "\"Tires\"",
										"start-index": "1",
										"end-index": "4"
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 536737467376127,
									"parameters": {
										"object": "roads",
										"expression": "roads.back",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 498635059884279,
									"parameters": {
										"variable": "tile",
										"value": "roads.TileAt(roads.PositionToTileX(roads.SnapX(Car.ImagePointX(loopindex(\"Tires\")))), roads.PositionToTileY(roads.SnapY(Car.ImagePointY(loopindex(\"Tires\")))))"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 393254593496402,
									"parameters": {
										"variable": "max_speed_coef",
										"value": "0.25 * TileToConditionData.At(tile, 2)"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 695123240189232,
									"parameters": {
										"variable": "accel_coef",
										"value": "0.25 * TileToConditionData.At(tile, 3)"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 905230606359579,
									"parameters": {
										"variable": "decel_coef",
										"value": "0.25 * TileToConditionData.At(tile, 4)"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 192150219194437,
									"parameters": {
										"variable": "steer_coef",
										"value": "0.25 * TileToConditionData.At(tile, 5)"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 181054094772962,
									"parameters": {
										"variable": "recover_coef",
										"value": "0.25 * TileToConditionData.At(tile, 6)"
									}
								}
							],
							"sid": 373180261892117
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Car",
									"sid": 775246386837850,
									"parameters": {
										"instance-variable": "Player"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 528988527452348,
									"parameters": {
										"variable": "NitroState",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 588708299947543,
									"parameters": {
										"variable": "max_speed_coef",
										"value": "flags.Get(\"difficulty_nitro_boost\") + (NitroState = 2 ? flags.Get(\"difficulty_nitro_extra_boost\") : 0)"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 344857904221488,
									"parameters": {
										"variable": "accel_coef",
										"value": "2 * (flags.Get(\"difficulty_nitro_boost\") + (NitroState = 2 ? flags.Get(\"difficulty_nitro_extra_boost\") : 0))"
									}
								}
							],
							"sid": 967319426609464
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Car",
									"sid": 595920282046585,
									"parameters": {
										"instance-variable": "CarSpeed",
										"value": "Car.CarSpeedBasic * max_speed_coef"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Car",
									"sid": 414472696940060,
									"parameters": {
										"instance-variable": "CarRecover",
										"value": "Car.CarRecoverBasic* recover_coef"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Car",
									"sid": 993778345694793,
									"parameters": {
										"instance-variable": "CarDecel",
										"value": "Car.CarDecelBasic * decel_coef"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Car",
									"sid": 490884613596578,
									"parameters": {
										"instance-variable": "CarAccel",
										"value": "Car.CarAccelBasic * accel_coef"
									}
								},
								{
									"id": "set-max-speed",
									"objectClass": "Car",
									"sid": 564673117857545,
									"behaviorType": "Car",
									"parameters": {
										"max-speed": "lerp(Car.Car.MaxSpeed, Car.CarSpeed, 0.03)"
									}
								},
								{
									"id": "set-drift-recover",
									"objectClass": "Car",
									"sid": 661403334321528,
									"behaviorType": "Car",
									"parameters": {
										"drift-recover": "lerp(Car.Car.DriftRecover, Car.CarRecover, 0.03)"
									}
								},
								{
									"id": "set-deceleration",
									"objectClass": "Car",
									"sid": 740151744091498,
									"behaviorType": "Car",
									"parameters": {
										"deceleration": "lerp(Car.Car.Deceleration, Car.CarDecel, 0.03)"
									}
								},
								{
									"id": "set-acceleration",
									"objectClass": "Car",
									"sid": 207834400581295,
									"behaviorType": "Car",
									"parameters": {
										"acceleration": "lerp(Car.Car.Acceleration, Car.CarAccel, 0.03)"
									}
								}
							],
							"sid": 932365208350420
						}
					]
				}
			]
		},
		{
			"functionName": "do_timer",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": true,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "dbgtxt",
					"sid": 785447006561160,
					"parameters": {
						"text": "\"3\""
					}
				},
				{
					"id": "wait",
					"objectClass": "System",
					"sid": 872452996975169,
					"parameters": {
						"seconds": "0.5"
					}
				},
				{
					"id": "set-text",
					"objectClass": "dbgtxt",
					"sid": 267889157482050,
					"parameters": {
						"text": "\"2\""
					}
				},
				{
					"id": "wait",
					"objectClass": "System",
					"sid": 483535772376535,
					"parameters": {
						"seconds": "0.5"
					}
				},
				{
					"id": "set-text",
					"objectClass": "dbgtxt",
					"sid": 957196118643071,
					"parameters": {
						"text": "\"1\""
					}
				},
				{
					"id": "wait",
					"objectClass": "System",
					"sid": 274923404517836,
					"parameters": {
						"seconds": "0.5"
					}
				},
				{
					"id": "set-text",
					"objectClass": "dbgtxt",
					"sid": 498204945200149,
					"parameters": {
						"text": "\"GO!\""
					}
				},
				{
					"id": "set-boolean-eventvar",
					"objectClass": "System",
					"sid": 328599854009769,
					"parameters": {
						"variable": "RaceStarted",
						"value": "true"
					}
				},
				{
					"id": "set-boolean-instvar",
					"objectClass": "car_edge_collision",
					"sid": 878069889348244,
					"parameters": {
						"instance-variable": "Moving",
						"value": "true"
					}
				},
				{
					"id": "wait",
					"objectClass": "System",
					"sid": 532145927276975,
					"parameters": {
						"seconds": "1.0"
					}
				},
				{
					"id": "set-text",
					"objectClass": "dbgtxt",
					"sid": 214023852890833,
					"parameters": {
						"text": "\"\""
					}
				}
			],
			"sid": 384147142029437
		},
		{
			"eventType": "variable",
			"name": "motion",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 395466524120937
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "SwipeControls",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "ondrop2",
							"objectClass": "SwipeZone",
							"sid": 812775819410950,
							"behaviorType": "BoundedDragDrop"
						}
					],
					"actions": [
						{
							"id": "set-x",
							"objectClass": "SwipeZone",
							"sid": 853463364294475,
							"parameters": {
								"x": "360"
							}
						}
					],
					"sid": 311010614429027
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "isdragging0",
							"objectClass": "SwipeZone",
							"sid": 187001764562427,
							"behaviorType": "BoundedDragDrop"
						},
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 910602694795989,
							"parameters": {
								"object": "Car",
								"expression": "Car.Player",
								"comparison": 0,
								"value": "1"
							}
						}
					],
					"actions": [
						{
							"id": "set-acceleration",
							"objectClass": "Car",
							"sid": 314428281400439,
							"disabled": true,
							"behaviorType": "Car",
							"parameters": {
								"acceleration": "lerp(Car.Car.MaxSpeed, Car.CarSpeed, 0.01)"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 174598454902211,
							"parameters": {
								"variable": "motion",
								"value": "max((motion=-Infinity?0:motion), Touch.SpeedAt(0))"
							}
						},
						{
							"id": "simulate-control",
							"objectClass": "Car",
							"sid": 204914384580535,
							"behaviorType": "Car",
							"parameters": {
								"control": "steer-right"
							}
						},
						{
							"id": "set-steer-speed",
							"objectClass": "Car",
							"sid": 838402817399750,
							"behaviorType": "Car",
							"parameters": {
								"steer-speed": "((roundToDp(ln(abs(round((SwipeZone.X - 360)*motion)))<1?1:ln(abs(round((SwipeZone.X - 360)*motion))), 3) - 7) * 25) * sign(SwipeZone.X - 360) * (-2 * flags.Get(\"controls_invert\")+ 1) * Self.SteerCoef"
							}
						},
						{
							"id": "simulate-control",
							"objectClass": "Car",
							"sid": 898639954645753,
							"behaviorType": "Car",
							"parameters": {
								"control": "brake"
							}
						}
					],
					"sid": 249043995918472
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "isdragging0",
							"objectClass": "SwipeZone",
							"sid": 253915233028827,
							"behaviorType": "BoundedDragDrop",
							"isInverted": true
						},
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 781407682417107,
							"parameters": {
								"object": "Car",
								"expression": "Car.Player",
								"comparison": 0,
								"value": "1"
							}
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 226202839924964,
							"parameters": {
								"variable": "RaceStarted"
							}
						},
						{
							"id": "pick-nth-instance",
							"objectClass": "System",
							"sid": 208155969460825,
							"disabled": true,
							"parameters": {
								"object": "score_ui",
								"instance": "0"
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "Car",
							"sid": 363228447547168,
							"behaviorType": "Car",
							"parameters": {
								"control": "accelerate"
							}
						}
					],
					"sid": 530704483037550
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "ondragstart1",
							"objectClass": "SwipeZone",
							"sid": 799156587623995,
							"behaviorType": "BoundedDragDrop"
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 385146942628229,
							"parameters": {
								"variable": "motion",
								"value": "0"
							}
						}
					],
					"sid": 331492976343401
				}
			],
			"sid": 475497567596928
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-value",
					"objectClass": "flags",
					"sid": 890303533509850,
					"parameters": {
						"key": "\"cam_angle_follow\"",
						"comparison": 0,
						"value": "1"
					}
				},
				{
					"id": "pick-by-comparison",
					"objectClass": "System",
					"sid": 540441411725320,
					"parameters": {
						"object": "Car",
						"expression": "Car.Player",
						"comparison": 0,
						"value": "1"
					}
				},
				{
					"id": "pick-all",
					"objectClass": "System",
					"sid": 232122164894431,
					"parameters": {
						"object": "car_position"
					}
				}
			],
			"actions": [
				{
					"id": "set-layer-angle",
					"objectClass": "System",
					"sid": 972851169738657,
					"parameters": {
						"layer": "\"Level\"",
						"angle": "Car.Angle + 90"
					}
				},
				{
					"id": "set-layer-angle",
					"objectClass": "System",
					"sid": 104143970661163,
					"parameters": {
						"layer": "\"Layout\"",
						"angle": "Car.Angle + 90"
					}
				},
				{
					"id": "set-angle",
					"objectClass": "car_position",
					"sid": 648591860387063,
					"parameters": {
						"angle": "LayerAngle(\"Level\")"
					}
				}
			],
			"sid": 384944017700124
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "GUI",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 207468257255313,
							"parameters": {
								"object": "RestartBut"
							}
						},
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 370335989656953,
							"parameters": {
								"key": 82
							}
						}
					],
					"actions": [
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 495515134177355
						}
					],
					"sid": 168451537167967,
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 270802273205703,
							"parameters": {
								"object": "ResumeBut"
							}
						},
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 395797030688577,
							"parameters": {
								"object": "Car",
								"expression": "Car.Player",
								"comparison": 0,
								"value": "1"
							}
						},
						{
							"id": "is-enabled",
							"objectClass": "Car",
							"sid": 379294827541584,
							"behaviorType": "Car"
						}
					],
					"actions": [
						{
							"callFunction": "ClosePauseMenu",
							"sid": 391500513750807
						}
					],
					"sid": 480063993697248
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 469013050197437,
							"parameters": {
								"object": "pause_menu"
							}
						}
					],
					"actions": [],
					"sid": 486319699999264,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 605608289106239,
									"parameters": {
										"first-value": "pause_back.Count",
										"comparison": 0,
										"second-value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "PauseGUI",
									"sid": 319920750890478,
									"parameters": [
										"\"Pause\""
									]
								}
							],
							"sid": 253509037624205
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 914768048822288
								}
							],
							"actions": [
								{
									"callFunction": "ClosePauseMenu",
									"sid": 979644386001232
								}
							],
							"sid": 225298065890444
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 822540791152301,
							"parameters": {
								"object": "ToMenuBut"
							}
						}
					],
					"actions": [
						{
							"id": "go-to-layout",
							"objectClass": "System",
							"sid": 790302344164399,
							"parameters": {
								"layout": "Menu"
							}
						}
					],
					"sid": 633491082395871
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 257182862903290,
							"parameters": {
								"object": "ReplayBut"
							}
						}
					],
					"actions": [
						{
							"callFunction": "ClosePauseMenu",
							"sid": 155155631590907
						},
						{
							"callFunction": "PlayRecording",
							"sid": 703720135853114
						}
					],
					"sid": 508264619498175
				}
			],
			"sid": 331973970547161
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-collision-with-another-object",
					"objectClass": "Car",
					"sid": 524660324732640,
					"parameters": {
						"object": "Obstacle"
					}
				},
				{
					"id": "is-visible",
					"objectClass": "Obstacle",
					"sid": 187921159145389
				}
			],
			"actions": [
				{
					"id": "move-to-object",
					"objectClass": "Obstacle",
					"sid": 396358626848159,
					"parameters": {
						"where": "behind",
						"object": "Car"
					}
				}
			],
			"sid": 536250306048691,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Car",
							"sid": 186013669087458,
							"parameters": {
								"instance-variable": "Player"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Car",
							"sid": 832701944786509,
							"parameters": {
								"instance-variable": "Flying"
							},
							"isInverted": true
						},
						{
							"id": "is-flashing",
							"objectClass": "Car",
							"sid": 897244025282699,
							"behaviorType": "Flash",
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 166737194605203,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 767155686734252,
									"parameters": {
										"variable": "Lives",
										"comparison": 4,
										"value": "0"
									}
								},
								{
									"id": "pick-nth-instance",
									"objectClass": "System",
									"sid": 868420893231576,
									"parameters": {
										"object": "score_ui",
										"instance": "0"
									}
								}
							],
							"actions": [
								{
									"id": "subtract-from-eventvar",
									"objectClass": "System",
									"sid": 980933785660310,
									"parameters": {
										"variable": "Lives",
										"value": "1"
									}
								},
								{
									"id": "set-text",
									"objectClass": "score_ui",
									"sid": 283340651848888,
									"parameters": {
										"text": "Lives&\"❤\""
									}
								},
								{
									"id": "flash",
									"objectClass": "Car",
									"sid": 124282884408575,
									"behaviorType": "Flash",
									"parameters": {
										"on-time": "0.1",
										"off-time": "0.1",
										"duration": "2"
									}
								}
							],
							"sid": 115197210711788
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 225924399049311
								}
							],
							"actions": [
								{
									"callFunction": "GameOver",
									"sid": 174546681566570
								}
							],
							"sid": 933664914530983
						}
					]
				}
			]
		},
		{
			"eventType": "variable",
			"name": "NitroCharge",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 964462098444223
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-collision-with-another-object",
					"objectClass": "Car",
					"sid": 219797985910387,
					"parameters": {
						"object": "Bonus"
					}
				},
				{
					"id": "is-visible",
					"objectClass": "Bonus",
					"sid": 158630039676986
				}
			],
			"actions": [],
			"sid": 746870235743867,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-animation-playing",
							"objectClass": "Bonus",
							"sid": 238481162742189,
							"parameters": {
								"animation": "\"Rocket\""
							}
						}
					],
					"actions": [
						{
							"id": "add-to-eventvar",
							"objectClass": "System",
							"sid": 995785134537596,
							"disabled": true,
							"parameters": {
								"variable": "NitroCharge",
								"value": "1"
							}
						}
					],
					"sid": 862892440629221
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Car",
							"sid": 465857910762751,
							"parameters": {
								"instance-variable": "Player"
							}
						},
						{
							"id": "is-animation-playing",
							"objectClass": "Bonus",
							"sid": 654363564068292,
							"parameters": {
								"animation": "\"Nitro\""
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 111574373256714,
							"parameters": {
								"variable": "NitroCharge",
								"value": "clamp(NitroCharge + flags.Get(\"difficulty_nitro_refill\"), 0, 100)"
							}
						},
						{
							"callFunction": "NitroChanged",
							"sid": 538382088095181
						}
					],
					"sid": 927283055220444
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 294413402385392
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Bonus",
							"sid": 119785878002064
						}
					],
					"sid": 450830539586907
				}
			]
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Replays",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 447851251919444,
							"parameters": {
								"key": 84
							}
						}
					],
					"actions": [
						{
							"callFunction": "PlayRecording",
							"sid": 730292119384132
						},
						{
							"id": "alert",
							"objectClass": "Browser",
							"sid": 405858672289170,
							"disabled": true,
							"parameters": {
								"message": "\"called\""
							}
						}
					],
					"sid": 870157689291548
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "onhitanypoint2",
							"objectClass": "Car",
							"sid": 382031192931229,
							"behaviorType": "Spline"
						}
					],
					"actions": [
						{
							"id": "setspeed51",
							"objectClass": "Car",
							"sid": 131384572952787,
							"behaviorType": "Spline",
							"parameters": {
								"speed0": "Recording.At(Car.Spline.CurSegP0, 4) = 0 ? 1 : Recording.At(Car.Spline.CurSegP0, 4)"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Car",
							"sid": 107643455293602,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"replay_angle\"",
								"property": "offsetAngle",
								"end-value": "Recording.At(Car.Spline.CurSegP0, 2)",
								"time": "0.02",
								"ease": "noease",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						}
					],
					"sid": 584676043645333
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "onhittarget0",
							"objectClass": "Car",
							"sid": 958627202619030,
							"behaviorType": "Spline"
						}
					],
					"actions": [
						{
							"id": "set-enabled",
							"objectClass": "Car",
							"sid": 588641582663336,
							"disabled": true,
							"behaviorType": "Car",
							"parameters": {
								"state": "enabled"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Car",
							"sid": 573268431675794,
							"disabled": true,
							"parameters": {
								"instance-variable": "Recording",
								"value": "true"
							}
						},
						{
							"id": "set-speed",
							"objectClass": "Car",
							"sid": 606476196266486,
							"disabled": true,
							"behaviorType": "Car",
							"parameters": {
								"speed": "Recording.At(Recording.Width - 1, 4)"
							}
						},
						{
							"id": "set-steer-speed",
							"objectClass": "Car",
							"sid": 854603968257718,
							"disabled": true,
							"behaviorType": "Car",
							"parameters": {
								"steer-speed": "Recording.At(Recording.Width - 1, 5)"
							}
						},
						{
							"id": "setenabled0",
							"objectClass": "Car",
							"sid": 923262497376277,
							"behaviorType": "Spline",
							"parameters": {
								"state2": "disabled"
							}
						},
						{
							"callFunction": "PauseGUI",
							"sid": 959522836023243,
							"parameters": [
								"\"Pause\""
							]
						}
					],
					"sid": 639716565281624
				},
				{
					"functionName": "PlayRecording",
					"functionDescription": "",
					"functionCategory": "Replay",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 653193130161429,
							"parameters": {
								"object": "Car"
							}
						}
					],
					"actions": [
						{
							"id": "set-enabled",
							"objectClass": "Car",
							"sid": 246128900534997,
							"behaviorType": "Car",
							"parameters": {
								"state": "disabled"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Car",
							"sid": 487642576402156,
							"parameters": {
								"instance-variable": "Recording",
								"value": "false"
							}
						},
						{
							"id": "set-position",
							"objectClass": "Car",
							"sid": 422055562618172,
							"parameters": {
								"x": "Recording.At(0, 0)",
								"y": "Recording.At(0, 1)"
							}
						},
						{
							"id": "setenabled0",
							"objectClass": "Car",
							"sid": 841204561145028,
							"behaviorType": "Spline",
							"parameters": {
								"state2": "enabled"
							}
						},
						{
							"id": "cleanall4",
							"objectClass": "Car",
							"sid": 273609349252002,
							"behaviorType": "Spline"
						}
					],
					"sid": 891195249981982,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-all",
									"objectClass": "System",
									"sid": 886177709674595,
									"parameters": {
										"object": "Obstacle"
									}
								}
							],
							"actions": [
								{
									"id": "set-cycle-position",
									"objectClass": "Obstacle",
									"sid": 325015435059144,
									"behaviorType": "Sine",
									"parameters": {
										"cycle-position": "0"
									}
								}
							],
							"sid": 446631089617771
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 166024283259343,
									"parameters": {
										"name": "\"replay\"",
										"start-index": "0",
										"end-index": "Recording.Width - 1"
									}
								}
							],
							"actions": [
								{
									"id": "addpoint2",
									"objectClass": "Car",
									"sid": 901708778228190,
									"behaviorType": "Spline",
									"parameters": {
										"x0": "Recording.At(loopindex(\"replay\"), 0)",
										"y1": "Recording.At(loopindex(\"replay\"), 1)"
									}
								}
							],
							"sid": 572772502474361
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 817980754285257
								}
							],
							"actions": [
								{
									"id": "start11",
									"objectClass": "Car",
									"sid": 642078631394312,
									"behaviorType": "Spline"
								}
							],
							"sid": 390177435553625
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Car",
							"sid": 267982475009382,
							"parameters": {
								"instance-variable": "Recording"
							}
						},
						{
							"id": "is-moving",
							"objectClass": "Car",
							"sid": 158309927404821,
							"behaviorType": "Car"
						},
						{
							"id": "every-x-seconds",
							"objectClass": "System",
							"sid": 656239895415409,
							"parameters": {
								"interval-seconds": "0.02"
							}
						}
					],
					"actions": [
						{
							"id": "push",
							"objectClass": "Recording",
							"sid": 874244107824949,
							"parameters": {
								"where": "back",
								"value": "0",
								"axis": "x"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "Recording",
							"sid": 752438450721513,
							"parameters": {
								"x": "Recording.Width - 1",
								"y": "0",
								"value": "Car.X"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "Recording",
							"sid": 560568263120212,
							"parameters": {
								"x": "Recording.Width - 1",
								"y": "1",
								"value": "Car.Y"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "Recording",
							"sid": 607558351164766,
							"parameters": {
								"x": "Recording.Width - 1",
								"y": "2",
								"value": "Car.Angle"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "Recording",
							"sid": 335655302737923,
							"parameters": {
								"x": "Recording.Width - 1",
								"y": "4",
								"value": "Car.Car.Speed"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "Recording",
							"sid": 672518735215222,
							"parameters": {
								"x": "Recording.Width - 1",
								"y": "5",
								"value": "Car.Car.SteerSpeed"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "Recording",
							"sid": 910023302307317,
							"parameters": {
								"x": "Recording.Width - 1",
								"y": "6",
								"value": "Car.Car.MaxSpeed"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "Recording",
							"sid": 588659555988874,
							"parameters": {
								"x": "Recording.Width - 1",
								"y": "7",
								"value": "Car.Car.Acceleration"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "Recording",
							"sid": 594663994733942,
							"parameters": {
								"x": "Recording.Width - 1",
								"y": "8",
								"value": "Car.Car.Deceleration"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "Recording",
							"sid": 734743721305741,
							"parameters": {
								"x": "Recording.Width - 1",
								"y": "9",
								"value": "Car.Car.DriftRecover"
							}
						}
					],
					"sid": 681221152113267
				}
			],
			"sid": 805120578053349
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-tap-object",
					"objectClass": "Touch",
					"sid": 269785703807415,
					"parameters": {
						"object": "JumpBut"
					}
				},
				{
					"id": "on-key-pressed",
					"objectClass": "Keyboard",
					"sid": 712624905879571,
					"parameters": {
						"key": 32
					}
				}
			],
			"actions": [],
			"sid": 227509214276849,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 540460365312664,
							"parameters": {
								"object": "Car",
								"expression": "Car.Player",
								"comparison": 0,
								"value": "1"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Car",
							"sid": 990709633037269,
							"parameters": {
								"instance-variable": "Flying"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "Car",
							"sid": 132366776272729,
							"parameters": {
								"instance-variable": "Flying",
								"value": "true"
							}
						},
						{
							"id": "tween-two-properties",
							"objectClass": "Car",
							"sid": 987102020579676,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"jumpUp\"",
								"property": "scale",
								"end-x": "1.5",
								"end-y": "1.5",
								"time": "0.5",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 291735417048473
						},
						{
							"id": "tween-two-properties",
							"objectClass": "Car",
							"sid": 233741630407052,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"jumpDown\"",
								"property": "scale",
								"end-x": "flags.Get(\"controls_car_scale\") = 0 ? 0.75 :\r\nflags.Get(\"controls_car_scale\") = 1 ? 1 : 1.25",
								"end-y": "flags.Get(\"controls_car_scale\") = 0 ? 0.75 :\r\nflags.Get(\"controls_car_scale\") = 1 ? 1 : 1.25",
								"time": "0.5",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 408577990524836
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Car",
							"sid": 501500217997459,
							"parameters": {
								"instance-variable": "Flying",
								"value": "false"
							}
						}
					],
					"sid": 190762254596948
				}
			],
			"isOrBlock": true
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Find collision points",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Toggle frame variable, so 0 ->1, 1 ->0"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "car_edge_collision",
							"sid": 157436948294115,
							"parameters": {
								"object": "Obstacle"
							}
						},
						{
							"id": "is-visible",
							"objectClass": "Obstacle",
							"sid": 979177918711675
						},
						{
							"id": "pick-parent",
							"objectClass": "car_edge_collision",
							"sid": 521469503171737,
							"parameters": {
								"parent": "Car",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Car",
							"sid": 375430016305216,
							"parameters": {
								"instance-variable": "second_frame",
								"value": "1 - Self.second_frame"
							}
						}
					],
					"sid": 708394970639735,
					"children": [
						{
							"eventType": "comment",
							"text": "This condition added to decrease CPU utilization - every 2nd frame will be skipped"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Car",
									"sid": 261099388306599,
									"parameters": {
										"instance-variable": "second_frame",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "let obs = runtime.objects.Obstacle.getFirstPickedInstance();\nlet car = runtime.objects.car_edge_collision.getFirstPickedInstance();\nlet collision = SAT_collision(car, obs);\nlet point = get_collision_point(car, obs, collision);\nlet new_spark = runtime.objects.EdgeSparks.createInstance(\"Level\", point.x, point.y, false);\nnew_spark.angleDegrees = car.angleDegrees - 180;"
								}
							],
							"sid": 468478530275154
						}
					]
				}
			],
			"sid": 584124331413418
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "CarAI",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "CreateAI_Car",
					"functionDescription": "Make a Car instance become controlled by AI",
					"functionCategory": "AI",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "Car_UID",
							"type": "number",
							"initialValue": "0",
							"comment": "UID of a Car you want to make into AI-controlled",
							"sid": 112893805088891
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Car",
							"sid": 119313972554320,
							"parameters": {
								"unique-id": "Car_UID"
							}
						},
						{
							"id": "pick-nth-child",
							"objectClass": "Car",
							"sid": 733751354598599,
							"parameters": {
								"child": "car_edge_collision",
								"instance": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "Car",
							"sid": 166295577437688,
							"parameters": {
								"instance-variable": "Player",
								"value": "false"
							}
						},
						{
							"id": "set-default-controls",
							"objectClass": "Car",
							"sid": 858929937167034,
							"behaviorType": "Car",
							"parameters": {
								"default-controls": false
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "car_edge_collision",
							"sid": 507211020540727,
							"parameters": {
								"instance-variable": "ToCheckpoint",
								"value": "0"
							}
						}
					],
					"sid": 978724027478019
				},
				{
					"eventType": "variable",
					"name": "posy",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 861168511189242
				},
				{
					"eventType": "variable",
					"name": "posx",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 345184213952250
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 188644376001956
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 531037157954319,
							"parameters": {
								"object": "car_edge_collision"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "car_edge_collision",
							"sid": 714475754388682,
							"parameters": {
								"instance-variable": "Moving"
							}
						},
						{
							"id": "pick-parent",
							"objectClass": "car_edge_collision",
							"sid": 921318586863434,
							"parameters": {
								"parent": "Car",
								"which": "own"
							}
						},
						{
							"id": "is-enabled",
							"objectClass": "Car",
							"sid": 856003039906294,
							"behaviorType": "Car"
						},
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 311134122285440,
							"parameters": {
								"object": "checkpoint",
								"expression": "checkpoint.checkpointID",
								"comparison": 0,
								"value": "car_edge_collision.ToCheckpoint"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 525292474685063,
							"parameters": {
								"variable": "posx",
								"value": "checkpoint.X + car_edge_collision.randx"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 350076249368126,
							"parameters": {
								"variable": "posy",
								"value": "checkpoint.Y + car_edge_collision.randy"
							}
						}
					],
					"sid": 806660876213285,
					"children": [
						{
							"eventType": "variable",
							"name": "close_enough",
							"type": "number",
							"initialValue": "256",
							"comment": "",
							"isStatic": false,
							"isConstant": true,
							"sid": 791141512193820
						},
						{
							"eventType": "variable",
							"name": "AngleToNode",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 954097566000564
						},
						{
							"eventType": "comment",
							"text": "If we are close to a pathfinding node"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 461706386314696,
									"parameters": {
										"first-value": "distance(checkpoint.X, checkpoint.Y, Car.X, Car.Y)",
										"comparison": 3,
										"second-value": "close_enough"
									}
								}
							],
							"actions": [],
							"sid": 545725571284631,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-another-object",
											"objectClass": "car_edge_collision",
											"sid": 804103616620325,
											"parameters": {
												"object": "checkpoint"
											}
										}
									],
									"actions": [],
									"sid": 796121587095010,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 835015372501001,
													"parameters": {
														"first-value": "checkpoint.Count - 1",
														"comparison": 4,
														"second-value": "car_edge_collision.ToCheckpoint"
													}
												}
											],
											"actions": [
												{
													"id": "add-to-instvar",
													"objectClass": "car_edge_collision",
													"sid": 804657760379746,
													"parameters": {
														"instance-variable": "ToCheckpoint",
														"value": "1"
													}
												}
											],
											"sid": 808878695559772
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 220934340568428
												}
											],
											"actions": [
												{
													"id": "add-to-instvar",
													"objectClass": "car_edge_collision",
													"sid": 407264606719933,
													"parameters": {
														"instance-variable": "Lap",
														"value": "1"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "car_edge_collision",
													"sid": 785070574629523,
													"parameters": {
														"instance-variable": "ToCheckpoint",
														"value": "0"
													}
												}
											],
											"sid": 401267231861755
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "trigger-once-while-true",
													"objectClass": "System",
													"sid": 610808750350202
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "car_edge_collision",
													"sid": 288083064847790,
													"parameters": {
														"instance-variable": "randx",
														"value": "random(-128, 128)"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "car_edge_collision",
													"sid": 751520606686175,
													"parameters": {
														"instance-variable": "randy",
														"value": "random(-128, 128)"
													}
												}
											],
											"sid": 595317504458606
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Moving to a Node"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 821915143609136
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Car",
									"sid": 354774168576309,
									"parameters": {
										"instance-variable": "Player"
									},
									"isInverted": true
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 679778230390673,
									"parameters": {
										"object": "checkpoint",
										"expression": "checkpoint.checkpointID",
										"comparison": 0,
										"value": "car_edge_collision.ToCheckpoint"
									}
								}
							],
							"actions": [
								{
									"id": "alert",
									"objectClass": "Browser",
									"sid": 586141489291189,
									"disabled": true,
									"parameters": {
										"message": "\"far enough\""
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 965116423191176,
									"parameters": {
										"variable": "AngleToNode",
										"value": "angle(posx, posy, Car.X, Car.Y) + 180"
									}
								}
							],
							"sid": 287788368096255,
							"children": [
								{
									"eventType": "comment",
									"text": "Check if faced correctly"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 319612419389771,
											"parameters": {
												"first-value": "anglediff(Car.Car.MovingAngle, AngleToNode)",
												"comparison": 3,
												"second-value": "10"
											}
										}
									],
									"actions": [
										{
											"id": "alert",
											"objectClass": "Browser",
											"sid": 169151118077820,
											"disabled": true,
											"parameters": {
												"message": "\"accel\""
											}
										},
										{
											"id": "simulate-control",
											"objectClass": "Car",
											"sid": 723502932102272,
											"behaviorType": "Car",
											"parameters": {
												"control": "accelerate"
											}
										}
									],
									"sid": 594022691831406
								},
								{
									"eventType": "comment",
									"text": "Turn if faced the wrong way"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 554596639999114
										}
									],
									"actions": [],
									"sid": 569580498731315,
									"children": [
										{
											"eventType": "comment",
											"text": "Turn left"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-between-angles",
													"objectClass": "System",
													"sid": 994458828286350,
													"parameters": {
														"angle": "AngleToNode - Car.Angle",
														"first-angle": "0",
														"second-angle": "180"
													}
												}
											],
											"actions": [
												{
													"id": "simulate-control",
													"objectClass": "Car",
													"sid": 794075159616840,
													"behaviorType": "Car",
													"parameters": {
														"control": "steer-right"
													}
												},
												{
													"id": "set-steer-speed",
													"objectClass": "Car",
													"sid": 576961709905434,
													"disabled": true,
													"behaviorType": "Car",
													"parameters": {
														"steer-speed": "Car.Angle - AngleToNode - 120"
													}
												},
												{
													"id": "set-speed",
													"objectClass": "Car",
													"sid": 541857467079948,
													"disabled": true,
													"behaviorType": "Car",
													"parameters": {
														"speed": "Car.Car.Speed - Car.Car.Deceleration / fps"
													}
												}
											],
											"sid": 400091403475921
										},
										{
											"eventType": "comment",
											"text": "Turn right"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 305840951100071
												}
											],
											"actions": [
												{
													"id": "simulate-control",
													"objectClass": "Car",
													"sid": 528909507279755,
													"disabled": true,
													"behaviorType": "Car",
													"parameters": {
														"control": "brake"
													}
												},
												{
													"id": "set-steer-speed",
													"objectClass": "Car",
													"sid": 570615981738871,
													"disabled": true,
													"behaviorType": "Car",
													"parameters": {
														"steer-speed": "(AngleToNode - Car.Angle > 0 ? Car.Angle - AngleToNode + 180 : AngleToNode - Car.Angle) - 120"
													}
												},
												{
													"id": "simulate-control",
													"objectClass": "Car",
													"sid": 547074916181756,
													"behaviorType": "Car",
													"parameters": {
														"control": "steer-left"
													}
												}
											],
											"sid": 468376835002263
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-speed",
													"objectClass": "Car",
													"sid": 734280501274629,
													"behaviorType": "Car",
													"parameters": {
														"comparison": 2,
														"speed": "Car.Car.MaxSpeed * 0.33"
													}
												}
											],
											"actions": [
												{
													"id": "simulate-control",
													"objectClass": "Car",
													"sid": 116442944672973,
													"behaviorType": "Car",
													"parameters": {
														"control": "accelerate"
													}
												}
											],
											"sid": 933350816750451
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 427659551488592
												}
											],
											"actions": [
												{
													"id": "simulate-control",
													"objectClass": "Car",
													"sid": 317966153132488,
													"behaviorType": "Car",
													"parameters": {
														"control": "brake"
													}
												}
											],
											"sid": 110680849418276
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "checkpoint",
							"sid": 201870413994169,
							"parameters": {
								"object": "Car"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "checkpoint",
							"sid": 432069801493007,
							"parameters": {
								"instance-variable": "IsStart"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Car",
							"sid": 290631741811885,
							"parameters": {
								"instance-variable": "Player"
							}
						},
						{
							"id": "is-enabled",
							"objectClass": "Car",
							"sid": 653623603186249,
							"behaviorType": "Car"
						},
						{
							"id": "pick-nth-child",
							"objectClass": "Car",
							"sid": 763092830433212,
							"parameters": {
								"child": "car_edge_collision",
								"instance": "0"
							}
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 457118230040770,
							"parameters": {
								"variable": "RaceEnded"
							},
							"isInverted": true
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 189394555398929,
							"parameters": {
								"variable": "game_mode",
								"comparison": 0,
								"value": "\"Race\""
							}
						}
					],
					"actions": [],
					"sid": 397763229978442,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "car_edge_collision",
									"sid": 674214002384426,
									"parameters": {
										"instance-variable": "Lap",
										"comparison": 0,
										"value": "RaceLaps"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 954083874840471,
									"parameters": {
										"variable": "RaceEnded",
										"value": "true"
									}
								}
							],
							"sid": 422809599551430,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-nth-child",
											"objectClass": "Car",
											"sid": 362164587322104,
											"parameters": {
												"child": "car_position",
												"instance": "1"
											}
										}
									],
									"actions": [],
									"sid": 161439557733117,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-text",
													"objectClass": "car_position",
													"sid": 650568215143549,
													"parameters": {
														"text-to-compare": "\"1\"",
														"case-sensitivity": "ignore-case"
													}
												}
											],
											"actions": [
												{
													"id": "alert",
													"objectClass": "Browser",
													"sid": 842553728498896,
													"parameters": {
														"message": "\"Вы победили!\""
													}
												},
												{
													"callFunction": "PauseGUI",
													"sid": 845845409377800,
													"parameters": [
														"\"RaceWin\""
													]
												}
											],
											"sid": 260892953841443
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 607478760855019
												}
											],
											"actions": [
												{
													"id": "alert",
													"objectClass": "Browser",
													"sid": 713989092935225,
													"parameters": {
														"message": "\"Вы проиграли, заняв только \"&car_position.Text&\" место :-(\""
													}
												},
												{
													"callFunction": "PauseGUI",
													"sid": 935229014850127,
													"parameters": [
														"\"RaceLoss\""
													]
												}
											],
											"sid": 745508328726730
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-all",
											"objectClass": "System",
											"sid": 296148434779962,
											"parameters": {
												"object": "Car"
											}
										}
									],
									"actions": [
										{
											"id": "set-ignoring-input",
											"objectClass": "Car",
											"sid": 388262720375234,
											"behaviorType": "Car",
											"parameters": {
												"input": "start-ignoring"
											}
										},
										{
											"id": "stop",
											"objectClass": "Car",
											"sid": 434773294336003,
											"behaviorType": "Car"
										},
										{
											"id": "set-enabled",
											"objectClass": "Car",
											"sid": 311373024909186,
											"behaviorType": "Car",
											"parameters": {
												"state": "disabled"
											}
										}
									],
									"sid": 892186543327883
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 982646237940319
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "car_edge_collision",
									"sid": 746935580114524,
									"parameters": {
										"instance-variable": "Lap",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "ShowLap",
									"sid": 203550115831492
								}
							],
							"sid": 152673547617523
						}
					]
				}
			],
			"sid": 121200756819461
		},
		{
			"eventType": "variable",
			"name": "NitroState",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 542760795339966
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Nitrous",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 841843254043696,
							"parameters": {
								"object": "SwipeZone"
							}
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 981565806324316,
							"parameters": {
								"variable": "NitroCharge",
								"comparison": 4,
								"value": "0"
							}
						}
					],
					"actions": [],
					"sid": 498409207826978,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 574889884645141,
									"parameters": {
										"variable": "NitroState",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "tween-value",
									"objectClass": "NitroBar",
									"sid": 130970816840176,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"PerfectQTE\"",
										"start-value": "0",
										"end-value": "30",
										"time": "1",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 247854406736451,
									"parameters": {
										"variable": "NitroState",
										"value": "1"
									}
								}
							],
							"sid": 802565007239751
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 823685277917861,
									"parameters": {
										"variable": "NitroState",
										"comparison": 0,
										"value": "1"
									}
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 214525072193509,
									"parameters": {
										"first-value": "NitroBar.Tween.Value(\"PerfectQTE\")",
										"comparison": 5,
										"second-value": "20"
									}
								}
							],
							"actions": [
								{
									"id": "stop-all-tweens",
									"objectClass": "NitroBar",
									"sid": 715689080699809,
									"behaviorType": "Tween"
								},
								{
									"id": "set-effect-parameter",
									"objectClass": "NitroBar",
									"sid": 845903467178377,
									"parameters": {
										"effect": "\"AdjustHSL\"",
										"parameter-index": "0",
										"value": "30"
									}
								},
								{
									"id": "set-effect-parameter",
									"objectClass": "NitroBar",
									"sid": 710278218570903,
									"parameters": {
										"effect": "\"AdjustHSL\"",
										"parameter-index": "2",
										"value": "110"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 302689571092592,
									"parameters": {
										"variable": "NitroState",
										"value": "2"
									}
								}
							],
							"sid": 771196771063840
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "NitroBar",
							"sid": 596700319283639,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"PerfectQTE\""
							}
						}
					],
					"actions": [
						{
							"id": "set-effect-parameter",
							"objectClass": "NitroBar",
							"sid": 515613974502431,
							"parameters": {
								"effect": "\"AdjustHSL\"",
								"parameter-index": "0",
								"value": "Self.Tween.Value(\"PerfectQTE\")"
							}
						}
					],
					"sid": 283418350082540
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 758149531702668,
							"parameters": {
								"variable": "NitroState",
								"comparison": 1,
								"value": "0"
							}
						}
					],
					"actions": [],
					"sid": 207135247844216,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 967508338735115,
									"parameters": {
										"variable": "NitroCharge",
										"comparison": 4,
										"value": "0"
									}
								},
								{
									"id": "every-x-seconds",
									"objectClass": "System",
									"sid": 219040892974942,
									"disabled": true,
									"parameters": {
										"interval-seconds": "dt"
									}
								}
							],
							"actions": [
								{
									"id": "subtract-from-eventvar",
									"objectClass": "System",
									"sid": 739942859607628,
									"parameters": {
										"variable": "NitroCharge",
										"value": "flags.Get(\"difficulty_nitro_consumption\") * dt * (1 + (NitroState = 2 ? flags.Get(\"difficulty_nitro_extra_coef\") : 0))"
									}
								},
								{
									"callFunction": "NitroChanged",
									"sid": 818903763358340
								}
							],
							"sid": 517111887666095
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 544520811927454
								}
							],
							"actions": [
								{
									"id": "stop-all-tweens",
									"objectClass": "NitroBar",
									"sid": 793898924969459,
									"behaviorType": "Tween"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 433661810697601,
									"parameters": {
										"variable": "NitroCharge",
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 653482084304613,
									"parameters": {
										"variable": "NitroState",
										"value": "0"
									}
								},
								{
									"id": "set-effect-parameter",
									"objectClass": "NitroBar",
									"sid": 295258652084984,
									"parameters": {
										"effect": "\"AdjustHSL\"",
										"parameter-index": "0",
										"value": "0"
									}
								},
								{
									"id": "set-effect-parameter",
									"objectClass": "NitroBar",
									"sid": 746279422324882,
									"parameters": {
										"effect": "\"AdjustHSL\"",
										"parameter-index": "2",
										"value": "100"
									}
								}
							],
							"sid": 329669942008563
						}
					]
				}
			],
			"sid": 664422197213966
		},
		{
			"eventType": "script",
			"script": "// let's perform collision checks for cars! yay!\nif (!runtime.globalVars.RaceEnded) {\nconst dt = runtime.dt;\nconst all_cars = runtime.objects.Car.getAllInstances();\nfor (let index1 = 0; index1 < all_cars.length; index1++) {\n\tfor (let index2 = 0; index2 < all_cars.length; index2++) {\n\t\tif (index1 == index2) continue;\n\t\t\n\t\tlet cars = [all_cars[index1], all_cars[index2]];\n\t\tlet [cols, vecs, angdiffs] = [[], [], []];\n\t\tfor (let car of cars) {\n\t\t\tcols.push(car.getChildAt(0));\n\t\t\tvecs.push([car.behaviors.Car.vectorX, car.behaviors.Car.vectorY]);\n\t\t\tangdiffs.push(car.behaviors.Car.facingAngle - car.angle);\n\t\t\tcar.x += car.behaviors.Car.vectorX * dt;\n\t\t\tcar.y += car.behaviors.Car.vectorY * dt;\n\t\t\tcar.angle = car.behaviors.Car.facingAngle;\n\t\t}\n\t\tconst col_data = SAT_collision(cols[0], cols[1]);\n\t\tif (col_data.collided) {\n\t\t\tconst point = get_collision_point(cols[0], cols[1], col_data);\n\t\t\tlet new_v = [[0, 0], [0, 0]];\n\t\t\tlet new_av = [0, 0];\n\t\t\t[new_v[0][0], new_v[0][1], new_av[0], new_v[1][0], new_v[1][1], new_av[1]] = car_collision_resolution(cars[0], cars[1], col_data, point, runtime);\n\t\t\tfor (let i = 0; i < 2; i++) {\n\t\t\t\tcars[i].x -= col_data.overlap.x / 2 * (-i * 2 + 1) * ((col_data.obj === cars[0]) * 2 - 1);\n\t\t\t\tcars[i].y -= col_data.overlap.y / 2 * (-i * 2 + 1) * ((col_data.obj === cars[0]) * 2 - 1);\n\t\t\t\tcars[i].behaviors.Car.setImpulse(new_v[i][0], new_v[i][1]);\n\t\t\t\tcars[i].behaviors.Car.setVector(new_v[i][0], new_v[i][1]);\n\t\t\t\t//cars[i].behaviors.Car.spin = new_av[i] * (-i * 2 + 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfor (let i = 0; i < 2; i++) {\n\t\t\tcars[i].x -= vecs[i][0] * dt;\n\t\t\tcars[i].y -= vecs[i][1] * dt;\n\t\t\tcars[i].angle -= angdiffs[i];\n\t\t}\n\t}\n}\n}"
		},
		{
			"eventType": "script",
			"script": "// calculate car positions\nfunction getCP(id) {\n\tconst CP = runtime.objects.checkpoint.getAllInstances();\n\tfor (let checkpoint of CP) {\n\t\tif (checkpoint.instVars.checkpointID == id) { return checkpoint; }\n\t}\n}\n\nconst dt = runtime.dt;\nconst all_cars = runtime.objects.Car.getAllInstances();\nconst CPs = runtime.objects.checkpoint.getAllInstances().length;\nlet results = [];\nfor (let index = 0; index < all_cars.length; index++) {\n\tlet car = all_cars[index];\n\tlet [posx, posy] = car.getImagePoint(\"Front\");\n\tlet col = car.getChildAt(0);\n\tlet txt = car.getChildAt(1);\n\tlet newCP = getCP(col.instVars.ToCheckpoint);\n\tlet oldCP = getCP((CPs - 1 + col.instVars.ToCheckpoint) % CPs);\n\tlet completion_fraction = Vector.distance(Vector(posx, posy), Vector(oldCP.x, oldCP.y)) / Vector.distance(Vector(oldCP.x, oldCP.y), Vector(newCP.x, newCP.y));\n\tlet pos = (col.instVars.Lap) * CPs + col.instVars.ToCheckpoint + completion_fraction;\n\tconsole.log(col, pos);\n\tresults.push({txt: txt, pos: pos});\n}\nresults = results.sort((a, b) => {return b.pos - a.pos});\nfor (let index = 0; index < results.length; index++) results[index].txt.text = String(index + 1);"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "for-each",
					"objectClass": "System",
					"sid": 457580313827259,
					"parameters": {
						"object": "Car"
					}
				}
			],
			"actions": [],
			"sid": 221676494028414,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-enabled",
							"objectClass": "Car",
							"sid": 733945694557976,
							"behaviorType": "Car"
						},
						{
							"id": "is-moving",
							"objectClass": "Car",
							"sid": 541725153845777,
							"behaviorType": "Car"
						},
						{
							"id": "is-within-angle",
							"objectClass": "System",
							"sid": 721681803202160,
							"parameters": {
								"angle-1": "Car.Angle",
								"within": "7",
								"angle-2": "Car.Car.MovingAngle"
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 936633859692382,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Car",
									"sid": 228156379686161,
									"parameters": {
										"instance-variable": "Drifting"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "Car",
									"sid": 352041226920022,
									"parameters": {
										"instance-variable": "Drifting",
										"value": "true"
									}
								},
								{
									"id": "spawn-another-object",
									"objectClass": "Car",
									"sid": 518561070610922,
									"parameters": {
										"object": "DriftMarks",
										"layer": "Car.LayerName",
										"image-point": "1",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Car",
									"sid": 781071927929947,
									"parameters": {
										"instance-variable": "TrailLeft",
										"value": "DriftMarks.IID"
									}
								},
								{
									"id": "spawn-another-object",
									"objectClass": "Car",
									"sid": 388861702274289,
									"parameters": {
										"object": "DriftMarks",
										"layer": "Car.LayerName",
										"image-point": "2",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Car",
									"sid": 161657001581806,
									"parameters": {
										"instance-variable": "TrailRight",
										"value": "DriftMarks.IID"
									}
								}
							],
							"sid": 505971153672934,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 648353176157973,
											"parameters": {
												"object": "Particles",
												"expression": "Particles.Pin.PinnedUID",
												"comparison": 0,
												"value": "Car.UID"
											}
										}
									],
									"actions": [
										{
											"id": "set-rate",
											"objectClass": "Particles",
											"sid": 391330765258693,
											"parameters": {
												"rate": "100"
											}
										}
									],
									"sid": 323072104442720
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 691044268247382
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "Car",
							"sid": 443933807759890,
							"parameters": {
								"instance-variable": "Drifting",
								"value": "false"
							}
						}
					],
					"sid": 224612138966522,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 712825495251892,
									"parameters": {
										"object": "Particles",
										"expression": "Particles.Pin.PinnedUID",
										"comparison": 0,
										"value": "Car.UID"
									}
								}
							],
							"actions": [
								{
									"id": "set-rate",
									"objectClass": "Particles",
									"sid": 458151845805522,
									"parameters": {
										"rate": "0"
									}
								}
							],
							"sid": 904281616787890
						}
					]
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "for-each",
					"objectClass": "System",
					"sid": 882004288862153,
					"parameters": {
						"object": "Car"
					}
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "Car",
					"sid": 776814762250373,
					"parameters": {
						"instance-variable": "Drifting"
					}
				}
			],
			"actions": [],
			"sid": 207082203138324,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-nth-instance",
							"objectClass": "System",
							"sid": 228863416520493,
							"parameters": {
								"object": "DriftMarks",
								"instance": "Car.TrailLeft"
							}
						}
					],
					"actions": [
						{
							"id": "push-point",
							"objectClass": "DriftMarks",
							"sid": 912800325404503,
							"behaviorType": "TrailRenderer",
							"parameters": {
								"x": "Car.ImagePointX(1)",
								"y": "Car.ImagePointY(1)",
								"angle": "0",
								"angle-towards-new-position": true
							}
						}
					],
					"sid": 441722833093916
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-nth-instance",
							"objectClass": "System",
							"sid": 328509639074608,
							"parameters": {
								"object": "DriftMarks",
								"instance": "Car.TrailRight"
							}
						}
					],
					"actions": [
						{
							"id": "push-point",
							"objectClass": "DriftMarks",
							"sid": 253900538252406,
							"behaviorType": "TrailRenderer",
							"parameters": {
								"x": "Car.ImagePointX(2)",
								"y": "Car.ImagePointY(2)",
								"angle": "0",
								"angle-towards-new-position": true
							}
						}
					],
					"sid": 863784516082383
				}
			]
		},
		{
			"functionName": "GameOver",
			"functionDescription": "",
			"functionCategory": "Level",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "pick-by-comparison",
					"objectClass": "System",
					"sid": 668442320460034,
					"parameters": {
						"object": "Car",
						"expression": "Car.Player",
						"comparison": 0,
						"value": "1"
					}
				},
				{
					"id": "pick-by-comparison",
					"objectClass": "System",
					"sid": 106426866688719,
					"parameters": {
						"object": "Particles",
						"expression": "Particles.Pin.PinnedUID",
						"comparison": 0,
						"value": "Car.UID"
					}
				},
				{
					"id": "pick-children",
					"objectClass": "Car",
					"sid": 868223799529901,
					"parameters": {
						"child": "car_edge_collision",
						"which": "own"
					}
				}
			],
			"actions": [
				{
					"id": "destroy",
					"objectClass": "Car",
					"sid": 674287031613541
				},
				{
					"id": "destroy",
					"objectClass": "Particles",
					"sid": 598382801858775
				},
				{
					"id": "destroy",
					"objectClass": "car_edge_collision",
					"sid": 942348303561293
				},
				{
					"id": "alert",
					"objectClass": "Browser",
					"sid": 631396347521442,
					"parameters": {
						"message": "\"Хорошая была попытка! Нажми [R] для перезапуска или [ESC] для выхода в меню\""
					}
				}
			],
			"sid": 402050969568482
		},
		{
			"functionName": "PlaceTireEffects",
			"functionDescription": "",
			"functionCategory": "Car",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 597562021221741,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 616696973845896,
							"parameters": {
								"object": "Car"
							}
						}
					],
					"actions": [],
					"sid": 255288339155328,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 593044341247061,
									"parameters": {
										"name": "\"TireImagePoints\"",
										"start-index": "1",
										"end-index": "2"
									}
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "Car",
									"sid": 301589384528769,
									"parameters": {
										"object": "Particles",
										"layer": "Car.LayerName",
										"image-point": "loopindex(\"TireImagePoints\")",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-angle",
									"objectClass": "Particles",
									"sid": 151348902195508,
									"parameters": {
										"angle": "Car.Angle - 180"
									}
								},
								{
									"id": "pin-to-object-properties",
									"objectClass": "Particles",
									"sid": 174827126620237,
									"behaviorType": "Pin",
									"parameters": {
										"pin-to": "Car",
										"x": true,
										"y": true,
										"angle": true,
										"width-type": "no",
										"height-type": "no",
										"z": false
									}
								},
								{
									"id": "set-rate",
									"objectClass": "Particles",
									"sid": 285489618975742,
									"parameters": {
										"rate": "0"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "Particles",
									"sid": 665805654244296,
									"parameters": {
										"where": "behind",
										"object": "Car"
									}
								}
							],
							"sid": 797430383919879
						}
					]
				}
			]
		},
		{
			"functionName": "PlaceCars",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 768059787536828,
			"children": [
				{
					"eventType": "variable",
					"name": "your_car",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 295556118141406
				},
				{
					"eventType": "variable",
					"name": "max_cars",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 755795888904673
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 315244674423035
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 212866351449558,
							"parameters": {
								"variable": "max_cars",
								"value": "game_mode = \"FreeRoam\" ? 1 : game_mode = \"Race\" ? flags.Get(\"difficulty_enemies\") + 1 : 6"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 513330801007423,
							"parameters": {
								"variable": "your_car",
								"value": "floor(random(max_cars))"
							}
						}
					],
					"sid": 153438724419673,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 154531886332095,
									"parameters": {
										"name": "\"roadX\"",
										"start-index": "0",
										"end-index": "roads.MapDisplayWidth - 1"
									}
								}
							],
							"actions": [],
							"sid": 889286294615477,
							"children": [
								{
									"eventType": "variable",
									"name": "is_start",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 951859219961951
								},
								{
									"eventType": "variable",
									"name": "tile",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 147215442098939
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 616534761114267,
											"parameters": {
												"name": "\"roadY\"",
												"start-index": "0",
												"end-index": "roads.MapDisplayHeight - 1"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 649127254491110,
											"parameters": {
												"object": "roads",
												"expression": "roads.back",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 838669965879737,
											"parameters": {
												"variable": "tile",
												"value": "roads.TileAt(loopindex(\"roadX\"), loopindex(\"roadY\"))"
											}
										},
										{
											"type": "script",
											"script": "const tile = localVars.tile;\n//console.log(tile);\nlocalVars.is_start = ((tile == 1) || (tile == 19) || (tile == 37) || (tile == 55));"
										}
									],
									"sid": 297751429026850,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-boolean-eventvar",
													"objectClass": "System",
													"sid": 309288902294598,
													"parameters": {
														"variable": "is_start"
													}
												},
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 984477522793654,
													"parameters": {
														"variable": "max_cars",
														"comparison": 4,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"id": "subtract-from-eventvar",
													"objectClass": "System",
													"sid": 152524284372150,
													"parameters": {
														"variable": "max_cars",
														"value": "1"
													}
												},
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 653888705245776,
													"parameters": {
														"object-to-create": "Car",
														"layer": "\"Level\"",
														"x": "roads.TileToPositionX(loopindex(\"roadX\"))",
														"y": "roads.TileToPositionY(loopindex(\"roadY\"))",
														"create-hierarchy": false
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "Car",
													"sid": 989251297994740,
													"parameters": {
														"instance-variable": "Player",
														"value": "false"
													}
												},
												{
													"id": "set-scale",
													"objectClass": "Car",
													"sid": 185331865056319,
													"parameters": {
														"scale": "flags.Get(\"controls_car_scale\") = 0 ? 0.75 :\nflags.Get(\"controls_car_scale\") = 1 ? 1 : 1.25\n"
													}
												},
												{
													"id": "move-to-top",
													"objectClass": "Car",
													"sid": 431273619398616
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 436305773123014,
													"parameters": {
														"variable": "DesAngle",
														"value": "Car.Angle"
													}
												},
												{
													"id": "spawn-another-object",
													"objectClass": "Car",
													"sid": 432058945571980,
													"parameters": {
														"object": "car_edge_collision",
														"layer": "Car.LayerName",
														"image-point": "0",
														"create-hierarchy": false
													}
												},
												{
													"id": "add-child",
													"objectClass": "Car",
													"sid": 336722452595477,
													"parameters": {
														"child": "car_edge_collision",
														"transform-x": true,
														"transform-y": true,
														"transform-w": false,
														"transform-h": false,
														"transform-a": true,
														"transform-z-elevation": true,
														"destroy-with-parent": false
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "car_edge_collision",
													"sid": 306473042771503,
													"parameters": {
														"instance-variable": "AttachedToCarUID",
														"value": "Car.UID"
													}
												},
												{
													"id": "spawn-another-object",
													"objectClass": "Car",
													"sid": 337184663514588,
													"parameters": {
														"object": "car_position",
														"layer": "Car.LayerName",
														"image-point": "0",
														"create-hierarchy": false
													}
												},
												{
													"id": "add-child",
													"objectClass": "Car",
													"sid": 848339365081239,
													"parameters": {
														"child": "car_position",
														"transform-x": true,
														"transform-y": true,
														"transform-w": false,
														"transform-h": false,
														"transform-a": false,
														"transform-z-elevation": true,
														"destroy-with-parent": false
													}
												},
												{
													"id": "set-angle",
													"objectClass": "car_position",
													"sid": 208413436487871,
													"parameters": {
														"angle": "0"
													}
												},
												{
													"id": "set-scale",
													"objectClass": "car_edge_collision",
													"sid": 520065153857969,
													"parameters": {
														"scale": "flags.Get(\"controls_car_scale\") = 0 ? 0.75 :\r\nflags.Get(\"controls_car_scale\") = 1 ? 1 : 1.25"
													}
												},
												{
													"id": "move-to-object",
													"objectClass": "Car",
													"sid": 247245267229676,
													"parameters": {
														"where": "behind",
														"object": "scenery"
													}
												}
											],
											"sid": 397767923037244,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 967742670248842,
															"parameters": {
																"variable": "your_car",
																"comparison": 0,
																"value": "max_cars"
															}
														}
													],
													"actions": [
														{
															"id": "add-child",
															"objectClass": "Car",
															"sid": 240208124860566,
															"parameters": {
																"child": "cam_follow",
																"transform-x": true,
																"transform-y": true,
																"transform-w": false,
																"transform-h": false,
																"transform-a": false,
																"transform-z-elevation": true,
																"destroy-with-parent": false
															}
														},
														{
															"id": "set-position-to-another-object",
															"objectClass": "cam_follow",
															"sid": 807310115909919,
															"parameters": {
																"object": "Car",
																"image-point-optional": "0"
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "Car",
															"sid": 350725173301034,
															"parameters": {
																"instance-variable": "Player",
																"value": "true"
															}
														},
														{
															"id": "alert",
															"objectClass": "Browser",
															"sid": 773362420563759,
															"disabled": true,
															"parameters": {
																"message": "\"I am alive!\""
															}
														}
													],
													"sid": 933641465303975
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 969548109740773
														}
													],
													"actions": [
														{
															"id": "set-boolean-instvar",
															"objectClass": "Car",
															"sid": 928475188084840,
															"parameters": {
																"instance-variable": "Player",
																"value": "false"
															}
														},
														{
															"callFunction": "CreateAI_Car",
															"sid": 347922515156801,
															"parameters": [
																"Car.UID"
															]
														}
													],
													"sid": 704604439110308
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-boolean-eventvar",
													"objectClass": "System",
													"sid": 611070313412306,
													"parameters": {
														"variable": "is_start"
													}
												}
											],
											"actions": [
												{
													"id": "alert",
													"objectClass": "Browser",
													"sid": 531293333152426,
													"disabled": true,
													"parameters": {
														"message": "is_start"
													}
												}
											],
											"sid": 763867925992173
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Make a random instance into player's car"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-random-instance",
									"objectClass": "System",
									"sid": 225717710751886,
									"parameters": {
										"object": "Car"
									}
								}
							],
							"actions": [],
							"sid": 429353638780984,
							"disabled": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 983085765904349,
									"parameters": {
										"object": "Car",
										"expression": "Car.Player",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [],
							"sid": 482048807598557,
							"disabled": true
						}
					]
				}
			]
		},
		{
			"functionName": "PlaceDriftZones",
			"functionDescription": "",
			"functionCategory": "Level",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "pick-by-comparison",
					"objectClass": "System",
					"sid": 408787567967364,
					"parameters": {
						"object": "roads",
						"expression": "roads.back",
						"comparison": 0,
						"value": "0"
					}
				},
				{
					"id": "for",
					"objectClass": "System",
					"sid": 331715828560073,
					"parameters": {
						"name": "\"roadX\"",
						"start-index": "0",
						"end-index": "roads.MapDisplayWidth - 1"
					}
				},
				{
					"id": "compare-two-values",
					"objectClass": "System",
					"sid": 323306471726885,
					"parameters": {
						"first-value": "LayoutName",
						"comparison": 1,
						"second-value": "\"ParkingLot\""
					}
				}
			],
			"actions": [],
			"sid": 812718394698630,
			"children": [
				{
					"eventType": "variable",
					"name": "is_corner",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 380354006622971
				},
				{
					"eventType": "variable",
					"name": "tile",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 208941485896185
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 710128845238558,
							"parameters": {
								"name": "\"roadY\"",
								"start-index": "0",
								"end-index": "roads.MapDisplayHeight - 1"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 471033587140015,
							"parameters": {
								"variable": "tile",
								"value": "roads.TileAt(loopindex(\"roadX\"), loopindex(\"roadY\"))"
							}
						},
						{
							"type": "script",
							"script": "localVars.is_corner = test_tile_for_corner(localVars.tile);"
						}
					],
					"sid": 818256060101756,
					"children": [
						{
							"eventType": "variable",
							"name": "clock_id",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 251892291217979
						},
						{
							"eventType": "variable",
							"name": "circle_id",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 481411812931935
						},
						{
							"eventType": "variable",
							"name": "pos_id",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 428030817733690
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 326041869151627,
									"parameters": {
										"variable": "is_corner"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 346221676380888,
									"parameters": {
										"object-to-create": "drift_zone",
										"layer": "\"Level\"",
										"x": "roads.TileToPositionX(loopindex(\"roadX\")) ",
										"y": "roads.TileToPositionY(loopindex(\"roadY\"))",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-size",
									"objectClass": "drift_zone",
									"sid": 515114012754357,
									"parameters": {
										"width": "768",
										"height": "768"
									}
								},
								{
									"type": "script",
									"script": "localVars.clock_id = map_corners_to_clock(localVars.tile);\nlocalVars.pos_id = map_corners_to_pos(localVars.tile);\nlocalVars.circle_id = map_corners_to_circle(localVars.tile);\n//alert(localVars.tile + \" \" + localVars.clock_id + \" \" + localVars.pos_id);"
								},
								{
									"id": "set-position",
									"objectClass": "drift_zone",
									"sid": 459751076026998,
									"parameters": {
										"x": "Self.X + (Self.Width - roads.TileWidth) / 2 * (floor(pos_id / 2) * 2 - 1)",
										"y": "Self.Y + (Self.Height - roads.TileHeight)/ 2 * (pos_id % 2 * 2 - 1)"
									}
								},
								{
									"id": "spawn-another-object",
									"objectClass": "drift_zone",
									"sid": 997591440249444,
									"parameters": {
										"object": "score_point",
										"layer": "drift_zone.LayerName",
										"image-point": "0",
										"create-hierarchy": false
									}
								}
							],
							"sid": 146848116386962,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-nearestfurthest",
											"objectClass": "Pole",
											"sid": 717501767919775,
											"parameters": {
												"which": "nearest",
												"x": "drift_zone.X",
												"y": "drift_zone.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "score_point",
											"sid": 568035662981478,
											"parameters": {
												"text": "Pole.TurnId"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "drift_zone",
											"sid": 501740035412067,
											"parameters": {
												"instance-variable": "TurnId",
												"value": "Pole.TurnId"
											}
										}
									],
									"sid": 214343128861257,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "Pole",
													"sid": 449106623849040,
													"parameters": {
														"instance-variable": "NinetyTurns",
														"comparison": 0,
														"value": "1"
													}
												}
											],
											"actions": [],
											"sid": 289742396992996,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "Pole",
															"sid": 530742933714603,
															"parameters": {
																"instance-variable": "Clockwise"
															}
														}
													],
													"actions": [
														{
															"id": "create-object",
															"objectClass": "System",
															"sid": 716965861330018,
															"parameters": {
																"object-to-create": "ideal",
																"layer": "drift_zone.LayerName",
																"x": "drift_zone.X + (clock_id % 2 = 0 ? 384: 0) * (clock_id - 1)",
																"y": "drift_zone.Y - (clock_id % 2 = 1 ? 384: 0) * (clock_id - 2)",
																"create-hierarchy": false
															}
														},
														{
															"id": "set-position",
															"objectClass": "ideal",
															"sid": 423399210453635,
															"disabled": true,
															"parameters": {
																"x": "Self.X - (clock_id % 2 = 1 ? 128: 0) * (clock_id - 2)",
																"y": "Self.Y - (clock_id % 2 = 0 ? 128: 0) * (clock_id - 1)"
															}
														}
													],
													"sid": 748937942571010
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 195081009435246
														}
													],
													"actions": [
														{
															"id": "create-object",
															"objectClass": "System",
															"sid": 395586656042518,
															"parameters": {
																"object-to-create": "ideal",
																"layer": "drift_zone.LayerName",
																"x": "drift_zone.X + (clock_id % 2 = 1 ? 384: 0) * (clock_id - 2)",
																"y": "drift_zone.Y + (clock_id % 2 = 0 ? 384: 0) * (clock_id - 1)",
																"create-hierarchy": false
															}
														},
														{
															"id": "set-position",
															"objectClass": "ideal",
															"sid": 644746043344159,
															"disabled": true,
															"parameters": {
																"x": "Self.X - (clock_id % 2 = 0 ? 128: 0) * (clock_id - 1)",
																"y": "Self.Y + (clock_id % 2 = 1 ? 128: 0) * (clock_id - 2)"
															}
														}
													],
													"sid": 796713206306448
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "Pole",
													"sid": 374967884098874,
													"parameters": {
														"instance-variable": "NinetyTurns",
														"comparison": 0,
														"value": "2"
													}
												},
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 194712431350592,
													"parameters": {
														"variable": "circle_id",
														"comparison": 0,
														"value": "(4 + Pole.TurnAngle / 90 - (Pole.Clockwise ? 0 : 1)) % 4"
													}
												}
											],
											"actions": [],
											"sid": 899873341117294,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "Pole",
															"sid": 105071269945523,
															"parameters": {
																"instance-variable": "Clockwise"
															}
														}
													],
													"actions": [
														{
															"id": "create-object",
															"objectClass": "System",
															"sid": 209883912724703,
															"parameters": {
																"object-to-create": "ideal",
																"layer": "drift_zone.LayerName",
																"x": "drift_zone.X - (circle_id % 2 = 0 ? 384: 0) * (circle_id  - 1)",
																"y": "drift_zone.Y - (circle_id % 2 = 1 ? 384: 0) * (circle_id - 2)",
																"create-hierarchy": false
															}
														},
														{
															"id": "set-position",
															"objectClass": "ideal",
															"sid": 952585300076152,
															"parameters": {
																"x": "Self.X - (circle_id % 2 = 1 ? 128: 0) * (circle_id- 2)",
																"y": "Self.Y + (circle_id % 2 = 0 ? 128: 0) * (circle_id - 1)"
															}
														}
													],
													"sid": 795058985891843
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 135830829910764
														}
													],
													"actions": [
														{
															"id": "create-object",
															"objectClass": "System",
															"sid": 572581500730926,
															"parameters": {
																"object-to-create": "ideal",
																"layer": "drift_zone.LayerName",
																"x": "drift_zone.X + (circle_id % 2 = 1 ? 384: 0) * (circle_id - 2)",
																"y": "drift_zone.Y - (circle_id  % 2 = 0 ? 384: 0) * (circle_id - 1)",
																"create-hierarchy": false
															}
														},
														{
															"id": "set-position",
															"objectClass": "ideal",
															"sid": 127432640100119,
															"parameters": {
																"x": "Self.X + (circle_id % 2 = 0 ? 128: 0) * (circle_id - 1)",
																"y": "Self.Y + (circle_id % 2 = 1 ? 128: 0) * (circle_id - 2)"
															}
														},
														{
															"id": "add-to-instvar",
															"objectClass": "drift_zone",
															"sid": 786810807240944,
															"parameters": {
																"instance-variable": "TurnId",
																"value": "0.1"
															}
														}
													],
													"sid": 114424647676053
												}
											]
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "key-is-down",
					"objectClass": "Keyboard",
					"sid": 264513969210501,
					"parameters": {
						"key": 90
					}
				}
			],
			"actions": [
				{
					"id": "set-layout-scale",
					"objectClass": "System",
					"sid": 745844035682638,
					"parameters": {
						"scale": "0.2"
					}
				}
			],
			"sid": 411903022746737
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "else",
					"objectClass": "System",
					"sid": 701615403089767
				}
			],
			"actions": [
				{
					"id": "set-layout-scale",
					"objectClass": "System",
					"sid": 476629621568217,
					"parameters": {
						"scale": "1"
					}
				}
			],
			"sid": 610789275688945
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "key-is-down",
					"objectClass": "Keyboard",
					"sid": 963961327981002,
					"parameters": {
						"key": 16
					}
				}
			],
			"actions": [
				{
					"id": "set-time-scale",
					"objectClass": "System",
					"sid": 620051023579981,
					"parameters": {
						"time-scale": "4"
					}
				}
			],
			"sid": 269343334982765
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "else",
					"objectClass": "System",
					"sid": 205474253222319
				},
				{
					"id": "compare-two-values",
					"objectClass": "System",
					"sid": 679571880073286,
					"parameters": {
						"first-value": "pause_back.Count",
						"comparison": 0,
						"second-value": "0"
					}
				}
			],
			"actions": [
				{
					"id": "set-time-scale",
					"objectClass": "System",
					"sid": 347123067371427,
					"parameters": {
						"time-scale": "1"
					}
				}
			],
			"sid": 319628953843936
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-created",
					"objectClass": "DriftMarks",
					"sid": 697573029330549
				}
			],
			"actions": [
				{
					"id": "set-angle",
					"objectClass": "DriftMarks",
					"sid": 379683087994991,
					"parameters": {
						"angle": "0"
					}
				},
				{
					"id": "move-to-object",
					"objectClass": "DriftMarks",
					"sid": 668683319012045,
					"parameters": {
						"where": "behind",
						"object": "Car"
					}
				}
			],
			"sid": 111980000100809,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 713069174565136,
							"parameters": {
								"first-value": "DriftMarks.Count",
								"comparison": 4,
								"second-value": "500"
							}
						}
					],
					"actions": [],
					"sid": 656376326181600,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-nth-instance",
									"objectClass": "System",
									"sid": 957436064580120,
									"parameters": {
										"object": "DriftMarks",
										"instance": "500"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "DriftMarks",
									"sid": 573288620528505
								}
							],
							"sid": 131250572611253
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-nth-instance",
									"objectClass": "System",
									"sid": 240261164235450,
									"parameters": {
										"object": "DriftMarks",
										"instance": "499"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "DriftMarks",
									"sid": 327003146228980
								}
							],
							"sid": 821517699206464
						}
					]
				}
			]
		},
		{
			"functionName": "ShowLap",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": true,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 488303853837712,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 502371627431322,
							"parameters": {
								"object": "Car",
								"expression": "Car.Player",
								"comparison": 0,
								"value": "1"
							}
						},
						{
							"id": "pick-nth-child",
							"objectClass": "Car",
							"sid": 759915782877712,
							"parameters": {
								"child": "car_edge_collision",
								"instance": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "dbgtxt",
							"sid": 155906170806888,
							"parameters": {
								"text": "\"Круг \"&car_edge_collision.Lap + 1"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 415313817633464,
							"parameters": {
								"seconds": "0.75"
							}
						},
						{
							"id": "set-text",
							"objectClass": "dbgtxt",
							"sid": 261500839241240,
							"parameters": {
								"text": "\"\""
							}
						}
					],
					"sid": 448439953553273
				}
			]
		},
		{
			"functionName": "PauseGUI",
			"functionDescription": "",
			"functionCategory": "GUI",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "Mode",
					"type": "string",
					"initialValue": "RaceEnd",
					"comment": "",
					"sid": 571435829572596
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "set-time-scale",
					"objectClass": "System",
					"sid": 900628543451947,
					"parameters": {
						"time-scale": "0.01"
					}
				},
				{
					"id": "create-object",
					"objectClass": "System",
					"sid": 971436670077800,
					"parameters": {
						"object-to-create": "pause_back",
						"layer": "\"GUI\"",
						"x": "360",
						"y": "700",
						"create-hierarchy": false
					}
				},
				{
					"id": "spawn-another-object",
					"objectClass": "pause_back",
					"sid": 870590764373086,
					"parameters": {
						"object": "ToMenuBut",
						"layer": "\"GUI\"",
						"image-point": "\"LeftBut\"",
						"create-hierarchy": false
					}
				},
				{
					"id": "spawn-another-object",
					"objectClass": "pause_back",
					"sid": 426113080653193,
					"parameters": {
						"object": "RestartBut",
						"layer": "\"GUI\"",
						"image-point": "\"MidBut\"",
						"create-hierarchy": false
					}
				},
				{
					"id": "spawn-another-object",
					"objectClass": "pause_back",
					"sid": 530126384881140,
					"parameters": {
						"object": "PauseTxt",
						"layer": "\"GUI\"",
						"image-point": "\"Txt\"",
						"create-hierarchy": false
					}
				}
			],
			"sid": 524000779246450,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 440819262557264,
							"parameters": {
								"variable": "Mode",
								"comparison": 0,
								"value": "\"Pause\""
							}
						}
					],
					"actions": [
						{
							"id": "spawn-another-object",
							"objectClass": "pause_back",
							"sid": 911813635443309,
							"parameters": {
								"object": "ResumeBut",
								"layer": "\"GUI\"",
								"image-point": "\"RightBut\"",
								"create-hierarchy": false
							}
						},
						{
							"id": "set-text",
							"objectClass": "PauseTxt",
							"sid": 241646942384130,
							"parameters": {
								"text": "\"Пауза\""
							}
						}
					],
					"sid": 776559164023902
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 489368274432570
						}
					],
					"actions": [
						{
							"id": "spawn-another-object",
							"objectClass": "pause_back",
							"sid": 111780026068115,
							"parameters": {
								"object": "ReplayBut",
								"layer": "\"GUI\"",
								"image-point": "\"RightBut\"",
								"create-hierarchy": false
							}
						}
					],
					"sid": 240256837355030,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 226377542048954,
									"parameters": {
										"variable": "Mode",
										"comparison": 0,
										"value": "\"RaceWin\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "PauseTxt",
									"sid": 309758369435937,
									"parameters": {
										"text": "\"Победа!\""
									}
								}
							],
							"sid": 161421835425715
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 552816132561632
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 851377747391867,
									"parameters": {
										"variable": "Mode",
										"comparison": 0,
										"value": "\"RaceLoss\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "PauseTxt",
									"sid": 479115006245955,
									"parameters": {
										"text": "\"Поражение!\""
									}
								}
							],
							"sid": 532083787721609
						}
					]
				}
			]
		},
		{
			"functionName": "ClosePauseMenu",
			"functionDescription": "",
			"functionCategory": "GUI",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "pick-all",
					"objectClass": "System",
					"sid": 392161964480493,
					"parameters": {
						"object": "pause_back"
					}
				},
				{
					"id": "pick-all",
					"objectClass": "System",
					"sid": 494590309063659,
					"parameters": {
						"object": "PauseTxt"
					}
				},
				{
					"id": "pick-all",
					"objectClass": "System",
					"sid": 775993923608643,
					"parameters": {
						"object": "ToMenuBut"
					}
				},
				{
					"id": "pick-all",
					"objectClass": "System",
					"sid": 637421414707645,
					"parameters": {
						"object": "RestartBut"
					}
				}
			],
			"actions": [
				{
					"id": "set-time-scale",
					"objectClass": "System",
					"sid": 832108707864991,
					"parameters": {
						"time-scale": "1.0"
					}
				},
				{
					"id": "destroy",
					"objectClass": "pause_back",
					"sid": 659437838784414
				},
				{
					"id": "destroy",
					"objectClass": "PauseTxt",
					"sid": 820071332137385
				},
				{
					"id": "destroy",
					"objectClass": "ToMenuBut",
					"sid": 527487691015437
				},
				{
					"id": "destroy",
					"objectClass": "RestartBut",
					"sid": 836118029065512
				}
			],
			"sid": 883847319105547,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-all",
							"objectClass": "System",
							"sid": 507709262307178,
							"parameters": {
								"object": "ResumeBut"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "ResumeBut",
							"sid": 460065966092469
						}
					],
					"sid": 498799195956696
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-all",
							"objectClass": "System",
							"sid": 339071765726184,
							"parameters": {
								"object": "ReplayBut"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "ReplayBut",
							"sid": 863490202763312
						}
					],
					"sid": 166544438180878
				}
			]
		},
		{
			"functionName": "NitroChanged",
			"functionDescription": "",
			"functionCategory": "GUI",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "set-width",
					"objectClass": "NitroBar",
					"sid": 897949687430350,
					"parameters": {
						"width": "4.6 * NitroCharge"
					}
				}
			],
			"sid": 305702894274554
		}
	],
	"sid": 528873411861220
}