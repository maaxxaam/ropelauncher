{
	"name": "LevelInits",
	"events": [
		{
			"eventType": "group",
			"disabled": false,
			"title": "Init Functions",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "PlaceTireEffects",
					"functionDescription": "",
					"functionCategory": "Car",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 742312758052950,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 244254161580286,
									"parameters": {
										"object": "Car"
									}
								}
							],
							"actions": [],
							"sid": 869570959215143,
							"disabled": true,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 445960287101065,
											"parameters": {
												"name": "\"TireImagePoints\"",
												"start-index": "1",
												"end-index": "1"
											}
										}
									],
									"actions": [
										{
											"id": "spawn-another-object",
											"objectClass": "Car",
											"sid": 660051512525494,
											"parameters": {
												"object": "Particles",
												"layer": "Car.LayerName",
												"image-point": "loopindex(\"TireImagePoints\")",
												"create-hierarchy": false
											}
										},
										{
											"id": "set-angle",
											"objectClass": "Particles",
											"sid": 619023062418516,
											"parameters": {
												"angle": "Car.Angle - 180"
											}
										},
										{
											"id": "pin-to-object-properties",
											"objectClass": "Particles",
											"sid": 637640197501913,
											"disabled": true,
											"behaviorType": "Pin",
											"parameters": {
												"pin-to": "Car",
												"x": true,
												"y": true,
												"angle": true,
												"width-type": "no",
												"height-type": "no",
												"z": false
											}
										},
										{
											"id": "add-child",
											"objectClass": "Car",
											"sid": 453667252843530,
											"parameters": {
												"child": "Particles",
												"transform-x": true,
												"transform-y": true,
												"transform-w": true,
												"transform-h": true,
												"transform-a": true,
												"transform-z-elevation": true,
												"destroy-with-parent": true
											}
										},
										{
											"id": "set-rate",
											"objectClass": "Particles",
											"sid": 593759753189017,
											"parameters": {
												"rate": "0"
											}
										},
										{
											"id": "move-to-object",
											"objectClass": "Particles",
											"sid": 133053887744600,
											"parameters": {
												"where": "behind",
												"object": "Car"
											}
										}
									],
									"sid": 163290690559552,
									"disabled": true
								}
							]
						}
					]
				},
				{
					"functionName": "PlaceCars",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 506008166153602,
					"children": [
						{
							"eventType": "variable",
							"name": "your_car",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 464665720206785
						},
						{
							"eventType": "variable",
							"name": "loaded",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 880150489672439
						},
						{
							"eventType": "variable",
							"name": "max_cars",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 719507629488441
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 767997567724479
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 988337023821027,
									"parameters": {
										"variable": "max_cars",
										"value": "game_mode = \"Race\" ? flags.Get(\"difficulty_enemies\") + 1 : game_mode = \"Brawl\" ? 6 : 1"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 181457396239701,
									"parameters": {
										"variable": "your_car",
										"value": "floor(random(max_cars))"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 899834369234642,
									"parameters": {
										"variable": "loaded",
										"value": "Functions.IsLoadedLvl"
									}
								}
							],
							"sid": 609190384951487,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 734091972714390,
											"parameters": {
												"variable": "loaded",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 375037162377092,
											"disabled": true,
											"parameters": {
												"seconds": "dt"
											}
										}
									],
									"sid": 617274891621365,
									"children": [
										{
											"eventType": "variable",
											"name": "start_uid",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"isStatic": false,
											"isConstant": false,
											"sid": 151147625194886
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 798516237785161,
													"parameters": {
														"object": "track_start"
													}
												}
											],
											"actions": [
												{
													"id": "spawn-another-object",
													"objectClass": "track_start",
													"sid": 601796424765235,
													"parameters": {
														"object": "timer",
														"layer": "track_start.LayerName",
														"image-point": "1",
														"create-hierarchy": false
													}
												},
												{
													"id": "set-animation",
													"objectClass": "timer",
													"sid": 563954450416375,
													"parameters": {
														"animation": "\"Three\"",
														"from": "beginning"
													}
												},
												{
													"type": "script",
													"script": "// todo: set timer angle\nlet vector = RoadEditor.track.segments[0].getTangent(1);\nlet angle = vector.angleSigned(new Vector(1, 0));\nlet timer = runtime.objects.timer.getFirstInstance();\ntimer.angleDegrees = -angle + 90;"
												}
											],
											"sid": 821431469245300
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 938689020939555,
													"parameters": {
														"name": "\"spawn_cars\"",
														"start-index": "0",
														"end-index": "max_cars - 1"
													}
												},
												{
													"id": "pick-nth-instance",
													"objectClass": "System",
													"sid": 715474067256107,
													"parameters": {
														"object": "start_brackets",
														"instance": "loopindex(\"spawn_cars\")"
													}
												}
											],
											"actions": [
												{
													"id": "spawn-another-object",
													"objectClass": "start_brackets",
													"sid": 629601037074697,
													"parameters": {
														"object": "Car",
														"layer": "Self.LayerName",
														"image-point": "\"Spawn\"",
														"create-hierarchy": false
													}
												},
												{
													"id": "set-angle",
													"objectClass": "Car",
													"sid": 560118571655179,
													"parameters": {
														"angle": "start_brackets.Angle"
													}
												},
												{
													"id": "spawn-another-object",
													"objectClass": "Car",
													"sid": 167456932604138,
													"parameters": {
														"object": "car_edge_collision",
														"layer": "Car.LayerName",
														"image-point": "0",
														"create-hierarchy": true
													}
												},
												{
													"id": "add-child",
													"objectClass": "Car",
													"sid": 810281815258708,
													"parameters": {
														"child": "car_edge_collision",
														"transform-x": true,
														"transform-y": true,
														"transform-w": true,
														"transform-h": true,
														"transform-a": true,
														"transform-z-elevation": true,
														"destroy-with-parent": true
													}
												},
												{
													"id": "set-scale",
													"objectClass": "Car",
													"sid": 493571021233572,
													"disabled": true,
													"parameters": {
														"scale": "flags.Get(\"controls_car_scale\") = 0 ? 0.75 :\nflags.Get(\"controls_car_scale\") = 1 ? 1 : 1.25\n"
													}
												},
												{
													"id": "move-to-top",
													"objectClass": "Car",
													"sid": 482708599102050
												},
												{
													"id": "move-to-object",
													"objectClass": "Car",
													"sid": 970538399604748,
													"parameters": {
														"where": "behind",
														"object": "scenery"
													}
												},
												{
													"id": "add-obstacle",
													"objectClass": "Car",
													"sid": 551080975972905,
													"behaviorType": "LineOfSight",
													"parameters": {
														"obstacle": "obstacle"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "Car",
													"sid": 688076442059888,
													"parameters": {
														"instance-variable": "index",
														"value": "Self.IID"
													}
												}
											],
											"sid": 633839022542963,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 626110077716846,
															"parameters": {
																"first-value": "loopindex(\"spawn_cars\")",
																"comparison": 0,
																"second-value": "your_car"
															}
														}
													],
													"actions": [
														{
															"id": "set-boolean-instvar",
															"objectClass": "Car",
															"sid": 228508039341760,
															"parameters": {
																"instance-variable": "Player",
																"value": "true"
															}
														},
														{
															"id": "spawn-another-object",
															"objectClass": "Car",
															"sid": 968268797029145,
															"parameters": {
																"object": "cam_follow",
																"layer": "Car.LayerName",
																"image-point": "0",
																"create-hierarchy": false
															}
														},
														{
															"id": "add-child",
															"objectClass": "Car",
															"sid": 980040007057083,
															"parameters": {
																"child": "cam_follow",
																"transform-x": true,
																"transform-y": true,
																"transform-w": false,
																"transform-h": false,
																"transform-a": false,
																"transform-z-elevation": true,
																"destroy-with-parent": false
															}
														},
														{
															"id": "set-position-to-another-object",
															"objectClass": "cam_follow",
															"sid": 637443769706688,
															"parameters": {
																"object": "Car",
																"image-point-optional": "0"
															}
														},
														{
															"id": "set-animation",
															"objectClass": "Car",
															"sid": 653080976969032,
															"parameters": {
																"animation": "CarChars.At(0, 0, ChosenCar)",
																"from": "beginning"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "Car",
															"sid": 319850313717427,
															"parameters": {
																"instance-variable": "CarAccelBasic",
																"value": "CarOwnership.At(2, 1, ChosenCar)"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "Car",
															"sid": 819967821567237,
															"parameters": {
																"instance-variable": "CarDecelBasic",
																"value": "CarOwnership.At(2, 2, ChosenCar)"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "Car",
															"sid": 272631804557603,
															"disabled": true,
															"parameters": {
																"instance-variable": "CarRecoverBasic",
																"value": "flags.Get(\"player_recover\")"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "Car",
															"sid": 388992303543749,
															"parameters": {
																"instance-variable": "CarSpeedBasic",
																"value": "CarOwnership.At(2, 0, ChosenCar)"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "Car",
															"sid": 900457681740009,
															"parameters": {
																"instance-variable": "SteerCoef",
																"value": "CarOwnership.At(2, 3, ChosenCar)"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 832315627787842,
															"parameters": {
																"variable": "PlayerUID",
																"value": "Car.UID"
															}
														}
													],
													"sid": 989937613750389
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 615292521657826
														}
													],
													"actions": [
														{
															"id": "set-animation",
															"objectClass": "Car",
															"sid": 772985333826911,
															"parameters": {
																"animation": "\"Enemy\"&floor(random(0, 4))",
																"from": "beginning"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "Car",
															"sid": 579090409811129,
															"parameters": {
																"instance-variable": "CarAccelBasic",
																"value": "flags.Get(\"ai_accel\")"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "Car",
															"sid": 865335006317799,
															"parameters": {
																"instance-variable": "CarDecelBasic",
																"value": "flags.Get(\"ai_decel\")"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "Car",
															"sid": 806397874068867,
															"parameters": {
																"instance-variable": "CarRecoverBasic",
																"value": "flags.Get(\"ai_recover\")"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "Car",
															"sid": 600347247573844,
															"parameters": {
																"instance-variable": "CarSpeedBasic",
																"value": "flags.Get(\"ai_max_speed\")"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "Car",
															"sid": 529155771272578,
															"parameters": {
																"instance-variable": "SteerCoef",
																"value": "flags.Get(\"ai_steer\")"
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "Car",
															"sid": 937892845174840,
															"parameters": {
																"instance-variable": "Player",
																"value": "false"
															}
														},
														{
															"id": "set-default-controls",
															"objectClass": "Car",
															"sid": 174318164366616,
															"behaviorType": "Car",
															"parameters": {
																"default-controls": false
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "car_edge_collision",
															"sid": 369535747817201,
															"parameters": {
																"instance-variable": "ToCheckpoint",
																"value": "0"
															}
														}
													],
													"sid": 634744977079208,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-eventvar",
																	"objectClass": "System",
																	"sid": 609374717626248,
																	"parameters": {
																		"variable": "game_mode",
																		"comparison": 0,
																		"value": "\"Brawl\""
																	}
																}
															],
															"actions": [
																{
																	"id": "create-object",
																	"objectClass": "System",
																	"sid": 983443752086863,
																	"parameters": {
																		"object-to-create": "tempGoal",
																		"layer": "\"Level\"",
																		"x": "random(brawl_arena.X + 1536, brawl_arena.BBoxRight - 1536)",
																		"y": "random(brawl_arena.Y + 1536, brawl_arena.BBoxBottom - 1536)",
																		"create-hierarchy": false,
																		"template-name": "\"\""
																	}
																},
																{
																	"id": "set-visible",
																	"objectClass": "tempGoal",
																	"sid": 732122183689927,
																	"parameters": {
																		"visibility": "invisible"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "car_edge_collision",
																	"sid": 776072086556648,
																	"parameters": {
																		"instance-variable": "GoalUID",
																		"value": "tempGoal.UID"
																	}
																}
															],
															"sid": 123030265804563
														}
													]
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 280766465281125,
													"parameters": {
														"variable": "game_mode",
														"comparison": 1,
														"value": "\"Race\""
													}
												}
											],
											"actions": [
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 661212786185162,
													"parameters": {
														"seconds": "dt"
													}
												}
											],
											"sid": 864903418884120,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 497325559481624,
															"parameters": {
																"object": "car_position"
															}
														}
													],
													"actions": [
														{
															"id": "destroy",
															"objectClass": "car_position",
															"sid": 598847787638024
														}
													],
													"sid": 466596533458267
												}
											]
										}
									]
								}
							]
						}
					]
				}
			],
			"sid": 447023400705493
		}
	],
	"sid": 644138091538447
}