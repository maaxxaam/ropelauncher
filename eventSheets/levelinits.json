{
	"name": "LevelInits",
	"events": [
		{
			"eventType": "group",
			"disabled": false,
			"title": "Init Functions",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "PlaceTireEffects",
					"functionDescription": "",
					"functionCategory": "Car",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 742312758052950,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 244254161580286,
									"parameters": {
										"object": "Car"
									}
								}
							],
							"actions": [],
							"sid": 869570959215143,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 445960287101065,
											"parameters": {
												"name": "\"TireImagePoints\"",
												"start-index": "1",
												"end-index": "1"
											}
										}
									],
									"actions": [
										{
											"id": "spawn-another-object",
											"objectClass": "Car",
											"sid": 660051512525494,
											"parameters": {
												"object": "Particles",
												"layer": "Car.LayerName",
												"image-point": "loopindex(\"TireImagePoints\")",
												"create-hierarchy": false
											}
										},
										{
											"id": "set-angle",
											"objectClass": "Particles",
											"sid": 619023062418516,
											"parameters": {
												"angle": "Car.Angle - 180"
											}
										},
										{
											"id": "pin-to-object-properties",
											"objectClass": "Particles",
											"sid": 637640197501913,
											"disabled": true,
											"behaviorType": "Pin",
											"parameters": {
												"pin-to": "Car",
												"x": true,
												"y": true,
												"angle": true,
												"width-type": "no",
												"height-type": "no",
												"z": false
											}
										},
										{
											"id": "add-child",
											"objectClass": "Car",
											"sid": 453667252843530,
											"parameters": {
												"child": "Particles",
												"transform-x": true,
												"transform-y": true,
												"transform-w": true,
												"transform-h": true,
												"transform-a": true,
												"transform-z-elevation": true,
												"destroy-with-parent": true
											}
										},
										{
											"id": "set-rate",
											"objectClass": "Particles",
											"sid": 593759753189017,
											"parameters": {
												"rate": "0"
											}
										},
										{
											"id": "move-to-object",
											"objectClass": "Particles",
											"sid": 133053887744600,
											"parameters": {
												"where": "behind",
												"object": "Car"
											}
										}
									],
									"sid": 163290690559552
								}
							]
						}
					]
				},
				{
					"functionName": "PlaceCars",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 506008166153602,
					"children": [
						{
							"eventType": "variable",
							"name": "your_car",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 464665720206785
						},
						{
							"eventType": "variable",
							"name": "loaded",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 880150489672439
						},
						{
							"eventType": "variable",
							"name": "max_cars",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 719507629488441
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 767997567724479
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 746396337756418,
									"parameters": {
										"variable": "max_cars",
										"value": "game_mode = \"FreeRoam\" ? 1 : game_mode = \"Race\" ? flags.Get(\"difficulty_enemies\") + 1 : 6"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 181457396239701,
									"parameters": {
										"variable": "your_car",
										"value": "floor(random(max_cars))"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 899834369234642,
									"parameters": {
										"variable": "loaded",
										"value": "Functions.IsLoadedLvl"
									}
								}
							],
							"sid": 609190384951487,
							"children": [
								{
									"eventType": "comment",
									"text": "Old system hidden there"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 161477656712842,
											"parameters": {
												"variable": "loaded",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [],
									"sid": 868289751795728,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 296027163651152,
													"parameters": {
														"name": "\"roadX\"",
														"start-index": "0",
														"end-index": "roads.MapDisplayWidth - 1"
													}
												}
											],
											"actions": [],
											"sid": 692604585268428,
											"children": [
												{
													"eventType": "variable",
													"name": "is_start",
													"type": "boolean",
													"initialValue": "false",
													"comment": "",
													"isStatic": false,
													"isConstant": false,
													"sid": 238104160827171
												},
												{
													"eventType": "variable",
													"name": "lv1",
													"type": "number",
													"initialValue": "0",
													"comment": "",
													"isStatic": false,
													"isConstant": false,
													"sid": 987291070116933
												},
												{
													"eventType": "variable",
													"name": "lv2",
													"type": "number",
													"initialValue": "0",
													"comment": "",
													"isStatic": false,
													"isConstant": false,
													"sid": 948544417674542
												},
												{
													"eventType": "variable",
													"name": "tile",
													"type": "number",
													"initialValue": "0",
													"comment": "",
													"isStatic": false,
													"isConstant": false,
													"sid": 857029517881681
												},
												{
													"eventType": "variable",
													"name": "tile_rotation",
													"type": "number",
													"initialValue": "0",
													"comment": "",
													"isStatic": false,
													"isConstant": false,
													"sid": 840089378258624
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "for",
															"objectClass": "System",
															"sid": 868609691700614,
															"parameters": {
																"name": "\"roadY\"",
																"start-index": "0",
																"end-index": "roads.MapDisplayHeight - 1"
															}
														},
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 857520200156315,
															"parameters": {
																"object": "roads",
																"expression": "roads.back",
																"comparison": 0,
																"value": "0"
															}
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 492606652682536,
															"parameters": {
																"variable": "tile",
																"value": "roads.TileAt(loopindex(\"roadX\"), loopindex(\"roadY\"))"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 268392638982121,
															"parameters": {
																"variable": "lv1",
																"value": "loopindex(\"roadX\")"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 743047595486571,
															"parameters": {
																"variable": "lv2",
																"value": "loopindex(\"roadY\")"
															}
														},
														{
															"type": "script",
															"script": "const tile = localVars.tile;\n//console.log(tile);\nlocalVars.is_start = ((tile == 1) || (tile == 19) || (tile == 37) || (tile == 55));"
														}
													],
													"sid": 180891756895276,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-boolean-eventvar",
																	"objectClass": "System",
																	"sid": 215008687729849,
																	"parameters": {
																		"variable": "is_start"
																	}
																},
																{
																	"id": "compare-eventvar",
																	"objectClass": "System",
																	"sid": 591370786883013,
																	"parameters": {
																		"variable": "max_cars",
																		"comparison": 4,
																		"value": "0"
																	}
																}
															],
															"actions": [
																{
																	"id": "subtract-from-eventvar",
																	"objectClass": "System",
																	"sid": 188928499954227,
																	"parameters": {
																		"variable": "max_cars",
																		"value": "1"
																	}
																},
																{
																	"id": "create-object",
																	"objectClass": "System",
																	"sid": 658637759466674,
																	"parameters": {
																		"object-to-create": "Car",
																		"layer": "\"Level\"",
																		"x": "roads.TileToPositionX(loopindex(\"roadX\"))",
																		"y": "roads.TileToPositionY(loopindex(\"roadY\"))",
																		"create-hierarchy": false,
																		"template-name": "\"\""
																	}
																},
																{
																	"type": "script",
																	"script": "let tmap = runtime.objects.roads.getFirstPickedInstance();\nlet ttile = tmap.getTileAt(localVars.lv1, localVars.lv2);\nlocalVars.tile_rotation = tile_degrees(ttile);"
																},
																{
																	"id": "set-angle",
																	"objectClass": "Car",
																	"sid": 450833727496235,
																	"parameters": {
																		"angle": "270 + tile_rotation"
																	}
																},
																{
																	"id": "spawn-another-object",
																	"objectClass": "Car",
																	"sid": 978497917498338,
																	"parameters": {
																		"object": "car_edge_collision",
																		"layer": "Car.LayerName",
																		"image-point": "0",
																		"create-hierarchy": true
																	}
																},
																{
																	"id": "add-child",
																	"objectClass": "Car",
																	"sid": 224706077185287,
																	"parameters": {
																		"child": "car_edge_collision",
																		"transform-x": true,
																		"transform-y": true,
																		"transform-w": true,
																		"transform-h": true,
																		"transform-a": true,
																		"transform-z-elevation": true,
																		"destroy-with-parent": true
																	}
																},
																{
																	"id": "set-scale",
																	"objectClass": "Car",
																	"sid": 246449527203090,
																	"parameters": {
																		"scale": "flags.Get(\"controls_car_scale\") = 0 ? 0.75 :\nflags.Get(\"controls_car_scale\") = 1 ? 1 : 1.25\n"
																	}
																},
																{
																	"id": "move-to-top",
																	"objectClass": "Car",
																	"sid": 589761770862007
																},
																{
																	"id": "set-scale",
																	"objectClass": "car_edge_collision",
																	"sid": 448319815526168,
																	"disabled": true,
																	"parameters": {
																		"scale": "flags.Get(\"controls_car_scale\") = 0 ? 0.75 :\r\nflags.Get(\"controls_car_scale\") = 1 ? 1 : 1.25"
																	}
																},
																{
																	"id": "move-to-object",
																	"objectClass": "Car",
																	"sid": 835885297773608,
																	"parameters": {
																		"where": "behind",
																		"object": "scenery"
																	}
																},
																{
																	"id": "spawn-another-object",
																	"objectClass": "Car",
																	"sid": 650716234161967,
																	"disabled": true,
																	"parameters": {
																		"object": "car_position",
																		"layer": "Car.LayerName",
																		"image-point": "0",
																		"create-hierarchy": false
																	}
																},
																{
																	"id": "add-child",
																	"objectClass": "Car",
																	"sid": 590836591143877,
																	"disabled": true,
																	"parameters": {
																		"child": "car_position",
																		"transform-x": true,
																		"transform-y": true,
																		"transform-w": false,
																		"transform-h": false,
																		"transform-a": false,
																		"transform-z-elevation": true,
																		"destroy-with-parent": false
																	}
																},
																{
																	"id": "spawn-another-object",
																	"objectClass": "Car",
																	"sid": 905458255806899,
																	"disabled": true,
																	"parameters": {
																		"object": "cannon",
																		"layer": "Car.LayerName",
																		"image-point": "0",
																		"create-hierarchy": false
																	}
																},
																{
																	"id": "add-child",
																	"objectClass": "Car",
																	"sid": 543934241698709,
																	"disabled": true,
																	"parameters": {
																		"child": "cannon",
																		"transform-x": true,
																		"transform-y": true,
																		"transform-w": false,
																		"transform-h": false,
																		"transform-a": false,
																		"transform-z-elevation": true,
																		"destroy-with-parent": true
																	}
																},
																{
																	"id": "add-obstacle",
																	"objectClass": "Car",
																	"sid": 742546762292312,
																	"behaviorType": "LineOfSight",
																	"parameters": {
																		"obstacle": "Old_Obstacle"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "Car",
																	"sid": 154466999221622,
																	"parameters": {
																		"instance-variable": "index",
																		"value": "Self.IID"
																	}
																}
															],
															"sid": 531126090027035,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-eventvar",
																			"objectClass": "System",
																			"sid": 955075144535141,
																			"parameters": {
																				"variable": "your_car",
																				"comparison": 0,
																				"value": "max_cars"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "alert",
																			"objectClass": "Browser",
																			"sid": 107537090814009,
																			"disabled": true,
																			"parameters": {
																				"message": "\"it happened \"&your_car&max_cars"
																			}
																		},
																		{
																			"id": "set-angle",
																			"objectClass": "car_position",
																			"sid": 869321652998536,
																			"disabled": true,
																			"parameters": {
																				"angle": "0"
																			}
																		},
																		{
																			"id": "set-boolean-instvar",
																			"objectClass": "Car",
																			"sid": 322182998836565,
																			"parameters": {
																				"instance-variable": "Player",
																				"value": "true"
																			}
																		},
																		{
																			"id": "spawn-another-object",
																			"objectClass": "Car",
																			"sid": 349185931880308,
																			"parameters": {
																				"object": "cam_follow",
																				"layer": "Car.LayerName",
																				"image-point": "0",
																				"create-hierarchy": false
																			}
																		},
																		{
																			"id": "add-child",
																			"objectClass": "Car",
																			"sid": 497184750348039,
																			"parameters": {
																				"child": "cam_follow",
																				"transform-x": true,
																				"transform-y": true,
																				"transform-w": false,
																				"transform-h": false,
																				"transform-a": false,
																				"transform-z-elevation": true,
																				"destroy-with-parent": false
																			}
																		},
																		{
																			"id": "set-position-to-another-object",
																			"objectClass": "cam_follow",
																			"sid": 714901860251640,
																			"parameters": {
																				"object": "Car",
																				"image-point-optional": "0"
																			}
																		},
																		{
																			"id": "set-animation",
																			"objectClass": "Car",
																			"sid": 688414528889449,
																			"parameters": {
																				"animation": "CarChars.At(0, 0, ChosenCar)",
																				"from": "beginning"
																			}
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "Car",
																			"sid": 363935210952435,
																			"parameters": {
																				"instance-variable": "Health",
																				"value": "flags.Get(\"difficulty_lives\")"
																			}
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "Car",
																			"sid": 698764668469550,
																			"parameters": {
																				"instance-variable": "CarAccelBasic",
																				"value": "CarOwnership.At(2, 1, ChosenCar)"
																			}
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "Car",
																			"sid": 744707061661747,
																			"parameters": {
																				"instance-variable": "CarDecelBasic",
																				"value": "CarOwnership.At(2, 2, ChosenCar)"
																			}
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "Car",
																			"sid": 191621884818623,
																			"disabled": true,
																			"parameters": {
																				"instance-variable": "CarRecoverBasic",
																				"value": "flags.Get(\"player_recover\")"
																			}
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "Car",
																			"sid": 483072728757192,
																			"parameters": {
																				"instance-variable": "CarSpeedBasic",
																				"value": "CarOwnership.At(2, 0, ChosenCar)"
																			}
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "Car",
																			"sid": 834349724218179,
																			"parameters": {
																				"instance-variable": "SteerCoef",
																				"value": "CarOwnership.At(2, 3, ChosenCar)"
																			}
																		}
																	],
																	"sid": 255693752047637
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "else",
																			"objectClass": "System",
																			"sid": 194521630835309
																		}
																	],
																	"actions": [
																		{
																			"id": "alert",
																			"objectClass": "Browser",
																			"sid": 948308633384294,
																			"disabled": true,
																			"parameters": {
																				"message": "\"it happened \"&your_car&max_cars"
																			}
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "Car",
																			"sid": 718597657494445,
																			"parameters": {
																				"instance-variable": "CarAccelBasic",
																				"value": "flags.Get(\"ai_accel\")"
																			}
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "Car",
																			"sid": 754738484513387,
																			"parameters": {
																				"instance-variable": "CarDecelBasic",
																				"value": "flags.Get(\"ai_decel\")"
																			}
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "Car",
																			"sid": 495970052331892,
																			"parameters": {
																				"instance-variable": "CarRecoverBasic",
																				"value": "flags.Get(\"ai_recover\")"
																			}
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "Car",
																			"sid": 774394707391066,
																			"parameters": {
																				"instance-variable": "CarSpeedBasic",
																				"value": "flags.Get(\"ai_max_speed\")"
																			}
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "Car",
																			"sid": 714476466502183,
																			"parameters": {
																				"instance-variable": "SteerCoef",
																				"value": "flags.Get(\"ai_steer\")"
																			}
																		},
																		{
																			"callFunction": "CreateAI_Car",
																			"sid": 781820646567332,
																			"parameters": [
																				"Car.UID"
																			]
																		}
																	],
																	"sid": 992199791380743
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 916052561093284,
																			"parameters": {
																				"object": "AIGoal",
																				"expression": "AIGoal.checkID",
																				"comparison": 0,
																				"value": "1"
																			}
																		},
																		{
																			"id": "pick-children",
																			"objectClass": "Car",
																			"sid": 108459151321880,
																			"parameters": {
																				"child": "car_edge_collision",
																				"which": "own"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-instvar-value",
																			"objectClass": "car_edge_collision",
																			"sid": 860606460324151,
																			"parameters": {
																				"instance-variable": "GoalUID",
																				"value": "AIGoal.UID"
																			}
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "car_edge_collision",
																			"sid": 652935754305299,
																			"parameters": {
																				"instance-variable": "ToCheckpoint",
																				"value": "1"
																			}
																		}
																	],
																	"sid": 855739593557307
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-eventvar",
																	"objectClass": "System",
																	"sid": 496155675509209,
																	"parameters": {
																		"variable": "max_cars",
																		"comparison": 0,
																		"value": "0"
																	}
																}
															],
															"actions": [
																{
																	"id": "stop-loop",
																	"objectClass": "System",
																	"sid": 737073623044663
																}
															],
															"sid": 392914590732395
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 957816985059348,
															"parameters": {
																"variable": "max_cars",
																"comparison": 0,
																"value": "0"
															}
														}
													],
													"actions": [
														{
															"id": "stop-loop",
															"objectClass": "System",
															"sid": 668907040720152
														}
													],
													"sid": 103171663950273
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 577449560900679
										}
									],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 375037162377092,
											"parameters": {
												"seconds": "dt"
											}
										}
									],
									"sid": 617274891621365,
									"children": [
										{
											"eventType": "variable",
											"name": "start_uid",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"isStatic": false,
											"isConstant": false,
											"sid": 151147625194886
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 979194047043370,
													"parameters": {
														"object": "road",
														"expression": "road.AnimationName",
														"comparison": 0,
														"value": "\"Start\""
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 759098383056402,
													"parameters": {
														"variable": "start_uid",
														"value": "road.UID"
													}
												},
												{
													"id": "alert",
													"objectClass": "Browser",
													"sid": 157193530399176,
													"disabled": true,
													"parameters": {
														"message": "start_uid"
													}
												}
											],
											"sid": 842709457955091
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 566409233435579
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 746201910659113,
													"parameters": {
														"object": "road",
														"expression": "road.AnimationName",
														"comparison": 0,
														"value": "\"Finish\""
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 902273701619135,
													"parameters": {
														"variable": "start_uid",
														"value": "road.UID"
													}
												},
												{
													"id": "alert",
													"objectClass": "Browser",
													"sid": 332180190089321,
													"disabled": true,
													"parameters": {
														"message": "start_uid"
													}
												}
											],
											"sid": 880098784869295
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-unique-id",
													"objectClass": "road",
													"sid": 774602734708135,
													"parameters": {
														"unique-id": "start_uid"
													}
												}
											],
											"actions": [
												{
													"id": "spawn-another-object",
													"objectClass": "road",
													"sid": 505614459870794,
													"parameters": {
														"object": "timer",
														"layer": "road.LayerName",
														"image-point": "\"timer\"",
														"create-hierarchy": false
													}
												},
												{
													"id": "set-animation",
													"objectClass": "timer",
													"sid": 620177985264837,
													"parameters": {
														"animation": "\"Three\"",
														"from": "beginning"
													}
												}
											],
											"sid": 701816470518379,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "for",
															"objectClass": "System",
															"sid": 763772477226357,
															"parameters": {
																"name": "\"spawn_cars\"",
																"start-index": "0",
																"end-index": "max_cars - 1"
															}
														}
													],
													"actions": [
														{
															"id": "spawn-another-object",
															"objectClass": "road",
															"sid": 174258114312607,
															"parameters": {
																"object": "Car",
																"layer": "\"Level\"",
																"image-point": "\"SpawnPoint\"&loopindex(\"spawn_cars\")",
																"create-hierarchy": false
															}
														},
														{
															"id": "set-angle",
															"objectClass": "Car",
															"sid": 447442845104428,
															"parameters": {
																"angle": "road.Angle - 90"
															}
														},
														{
															"id": "spawn-another-object",
															"objectClass": "Car",
															"sid": 401537541478194,
															"parameters": {
																"object": "car_edge_collision",
																"layer": "Car.LayerName",
																"image-point": "0",
																"create-hierarchy": true
															}
														},
														{
															"id": "add-child",
															"objectClass": "Car",
															"sid": 953206816271004,
															"parameters": {
																"child": "car_edge_collision",
																"transform-x": true,
																"transform-y": true,
																"transform-w": true,
																"transform-h": true,
																"transform-a": true,
																"transform-z-elevation": true,
																"destroy-with-parent": true
															}
														},
														{
															"id": "set-scale",
															"objectClass": "Car",
															"sid": 154876470501688,
															"disabled": true,
															"parameters": {
																"scale": "flags.Get(\"controls_car_scale\") = 0 ? 0.75 :\nflags.Get(\"controls_car_scale\") = 1 ? 1 : 1.25\n"
															}
														},
														{
															"id": "move-to-top",
															"objectClass": "Car",
															"sid": 434251693435600
														},
														{
															"id": "move-to-object",
															"objectClass": "Car",
															"sid": 199540990106785,
															"parameters": {
																"where": "behind",
																"object": "scenery"
															}
														},
														{
															"id": "add-obstacle",
															"objectClass": "Car",
															"sid": 503525547146810,
															"behaviorType": "LineOfSight",
															"parameters": {
																"obstacle": "Old_Obstacle"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "Car",
															"sid": 119514486682587,
															"parameters": {
																"instance-variable": "index",
																"value": "Self.IID"
															}
														}
													],
													"sid": 375909400864923,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 694130097894719,
																	"parameters": {
																		"first-value": "loopindex(\"spawn_cars\")",
																		"comparison": 0,
																		"second-value": "your_car"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-boolean-instvar",
																	"objectClass": "Car",
																	"sid": 972519743179976,
																	"parameters": {
																		"instance-variable": "Player",
																		"value": "true"
																	}
																},
																{
																	"id": "spawn-another-object",
																	"objectClass": "Car",
																	"sid": 451077364024462,
																	"parameters": {
																		"object": "cam_follow",
																		"layer": "Car.LayerName",
																		"image-point": "0",
																		"create-hierarchy": false
																	}
																},
																{
																	"id": "add-child",
																	"objectClass": "Car",
																	"sid": 291389457663781,
																	"parameters": {
																		"child": "cam_follow",
																		"transform-x": true,
																		"transform-y": true,
																		"transform-w": false,
																		"transform-h": false,
																		"transform-a": false,
																		"transform-z-elevation": true,
																		"destroy-with-parent": false
																	}
																},
																{
																	"id": "set-position-to-another-object",
																	"objectClass": "cam_follow",
																	"sid": 941406150694357,
																	"parameters": {
																		"object": "Car",
																		"image-point-optional": "0"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "Car",
																	"sid": 890552174043525,
																	"parameters": {
																		"instance-variable": "Health",
																		"value": "Lives"
																	}
																},
																{
																	"id": "set-animation",
																	"objectClass": "Car",
																	"sid": 856200661371274,
																	"parameters": {
																		"animation": "CarChars.At(0, 0, ChosenCar)",
																		"from": "beginning"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "Car",
																	"sid": 583909168841971,
																	"parameters": {
																		"instance-variable": "Health",
																		"value": "flags.Get(\"difficulty_lives\")"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "Car",
																	"sid": 607790605571460,
																	"parameters": {
																		"instance-variable": "CarAccelBasic",
																		"value": "CarOwnership.At(2, 1, ChosenCar)"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "Car",
																	"sid": 957231916163219,
																	"parameters": {
																		"instance-variable": "CarDecelBasic",
																		"value": "CarOwnership.At(2, 2, ChosenCar)"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "Car",
																	"sid": 497508006290291,
																	"disabled": true,
																	"parameters": {
																		"instance-variable": "CarRecoverBasic",
																		"value": "flags.Get(\"player_recover\")"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "Car",
																	"sid": 985043004575418,
																	"parameters": {
																		"instance-variable": "CarSpeedBasic",
																		"value": "CarOwnership.At(2, 0, ChosenCar)"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "Car",
																	"sid": 326629427424748,
																	"parameters": {
																		"instance-variable": "SteerCoef",
																		"value": "CarOwnership.At(2, 3, ChosenCar)"
																	}
																}
															],
															"sid": 825479471820846
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 195942633143777
																}
															],
															"actions": [
																{
																	"id": "set-animation",
																	"objectClass": "Car",
																	"sid": 776625363894877,
																	"parameters": {
																		"animation": "\"Enemy\"&floor(random(0, 4))",
																		"from": "beginning"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "Car",
																	"sid": 982549625410089,
																	"parameters": {
																		"instance-variable": "CarAccelBasic",
																		"value": "flags.Get(\"ai_accel\")"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "Car",
																	"sid": 716090938753317,
																	"parameters": {
																		"instance-variable": "CarDecelBasic",
																		"value": "flags.Get(\"ai_decel\")"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "Car",
																	"sid": 310498709684312,
																	"parameters": {
																		"instance-variable": "CarRecoverBasic",
																		"value": "flags.Get(\"ai_recover\")"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "Car",
																	"sid": 123214314898715,
																	"parameters": {
																		"instance-variable": "CarSpeedBasic",
																		"value": "flags.Get(\"ai_max_speed\")"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "Car",
																	"sid": 894915757561642,
																	"parameters": {
																		"instance-variable": "SteerCoef",
																		"value": "flags.Get(\"ai_steer\")"
																	}
																},
																{
																	"callFunction": "CreateAI_Car",
																	"sid": 271512684061880,
																	"parameters": [
																		"Car.UID"
																	]
																}
															],
															"sid": 510318449173045
														}
													]
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"functionName": "GenerateBorders&Checkpoints2",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 569864767442992,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 543950456067296,
									"parameters": {
										"object": "road"
									}
								}
							],
							"actions": [],
							"sid": 832776111215303,
							"children": [
								{
									"eventType": "variable",
									"name": "edge_angle",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 177355439098907
								},
								{
									"eventType": "variable",
									"name": "edge_angle_c3",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 602199145835049
								},
								{
									"eventType": "variable",
									"name": "edge_length",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 186400733607169
								},
								{
									"eventType": "variable",
									"name": "edge_y2",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 578378465882375
								},
								{
									"eventType": "variable",
									"name": "edge_y1",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 614873742077547
								},
								{
									"eventType": "variable",
									"name": "edge_x2",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 796953416079549
								},
								{
									"eventType": "variable",
									"name": "edge_x1",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 582596087760298
								},
								{
									"eventType": "variable",
									"name": "edge_dy",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 222434839030351
								},
								{
									"eventType": "variable",
									"name": "edge_dx",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 176630435632017
								},
								{
									"eventType": "variable",
									"name": "distance_to_end",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 145798777391809
								},
								{
									"eventType": "variable",
									"name": "distance_to_start",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 717307208730765
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 893525712794377,
											"parameters": {
												"name": "\"road_polygons\"",
												"start-index": "0",
												"end-index": "road.PolyPointCount - 1"
											}
										}
									],
									"actions": [
										{
											"type": "script",
											"script": "localVars.edge_angle = Math.atan2(localVars.edge_dx, localVars.edge_dy) * 180 / Math.PI;\nlocalVars.edge_angle_c3 = 360 - localVars.edge_angle;\n\nconst edge1 = Vector(localVars.edge_x1, localVars.edge_y1);\nconst edge2 = Vector(localVars.edge_x2, localVars.edge_y2);\n\nconst segment = runtime.objects.road.getFirstPickedInstance();\n\nconst start_point_coords = segment.getImagePoint(\"Start\");\nconst start_point = Vector(start_point_coords[0], start_point_coords[1]);\n\nconst end_point_coords = segment.getImagePoint(\"End\");\nconst end_point = Vector(end_point_coords[0], end_point_coords[1]);\n//console.log(start_point_coords, end_point_coords);\n\nlocalVars.distance_to_start = Math.abs(distance_line_point(edge1, edge2, start_point));\nlocalVars.distance_to_end = Math.abs(distance_line_point(edge1, edge2, end_point));"
										}
									],
									"sid": 614983410552924,
									"children": [
										{
											"eventType": "block",
											"conditions": [],
											"actions": [],
											"sid": 851278264287096
										}
									]
								},
								{
									"eventType": "comment",
									"text": "TO:DO - add extra borders for sprint tracks"
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [],
									"sid": 437077562466792
								},
								{
									"eventType": "comment",
									"text": "Generate checkpoint"
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "spawn-another-object",
											"objectClass": "road",
											"sid": 334940899881832,
											"parameters": {
												"object": "checkpoint",
												"layer": "road.LayerName",
												"image-point": "\"End\"",
												"create-hierarchy": false
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "checkpoint",
											"sid": 633475887188574,
											"parameters": {
												"instance-variable": "checkID",
												"value": "checkpoint.IID"
											}
										},
										{
											"id": "set-visible",
											"objectClass": "checkpoint",
											"sid": 327110393964490,
											"parameters": {
												"visibility": "visible"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "checkpoint",
											"sid": 902893602458638,
											"parameters": {
												"opacity": "100"
											}
										},
										{
											"id": "set-angle",
											"objectClass": "checkpoint",
											"sid": 682617812979553,
											"parameters": {
												"angle": "road.Angle + road.TurnAngle - 180"
											}
										}
									],
									"sid": 347480370601312,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "checkpoint",
													"sid": 317217949365578,
													"parameters": {
														"instance-variable": "checkID",
														"comparison": 0,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"id": "set-boolean-instvar",
													"objectClass": "checkpoint",
													"sid": 864135966789819,
													"parameters": {
														"instance-variable": "isStart",
														"value": "true"
													}
												}
											],
											"sid": 181589804147541
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 297937143950555
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "checkpoint",
													"sid": 312924477087974,
													"parameters": {
														"instance-variable": "checkID",
														"comparison": 0,
														"value": "road.Count - 1"
													}
												}
											],
											"actions": [
												{
													"id": "set-boolean-instvar",
													"objectClass": "checkpoint",
													"sid": 662515854438749,
													"parameters": {
														"instance-variable": "isStart",
														"value": "false"
													}
												}
											],
											"sid": 297184040121016,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 393845129176794,
															"parameters": {
																"object": "road"
															}
														},
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 961345967396618,
															"parameters": {
																"object": "road",
																"expression": "road.AnimationName",
																"comparison": 0,
																"value": "\"Start\""
															}
														}
													],
													"actions": [
														{
															"id": "set-boolean-instvar",
															"objectClass": "checkpoint",
															"sid": 225984661243899,
															"parameters": {
																"instance-variable": "IsEnd",
																"value": "true"
															}
														}
													],
													"sid": 384062631353916
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 488368974462052
														}
													],
													"actions": [
														{
															"id": "set-boolean-instvar",
															"objectClass": "checkpoint",
															"sid": 167047506723618,
															"parameters": {
																"instance-variable": "IsEnd",
																"value": "false"
															}
														}
													],
													"sid": 553919615409641
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 322061509376007
												}
											],
											"actions": [
												{
													"id": "set-boolean-instvar",
													"objectClass": "checkpoint",
													"sid": 869562446184989,
													"parameters": {
														"instance-variable": "isStart",
														"value": "false"
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "checkpoint",
													"sid": 478555687103895,
													"parameters": {
														"instance-variable": "IsEnd",
														"value": "false"
													}
												}
											],
											"sid": 768434581262868
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "road",
													"sid": 891403539178246,
													"parameters": {
														"instance-variable": "TurnAngle",
														"comparison": 0,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "checkpoint",
													"sid": 282617524416419,
													"parameters": {
														"animation": "\"Start\"",
														"from": "beginning"
													}
												}
											],
											"sid": 430599951882181
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 586226461568766
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "checkpoint",
													"sid": 258476407481531,
													"parameters": {
														"animation": "\"Check\"",
														"from": "beginning"
													}
												},
												{
													"id": "move-at-angle",
													"objectClass": "checkpoint",
													"sid": 990387669838556,
													"parameters": {
														"angle": "checkpoint.Angle - 180",
														"distance": "256"
													}
												}
											],
											"sid": 496785242801464
										}
									]
								}
							]
						}
					]
				}
			],
			"sid": 447023400705493
		}
	],
	"sid": 644138091538447
}